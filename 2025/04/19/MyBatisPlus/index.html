<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>笔记-MyBatisPlus | Muite</title><meta name="author" content="Muite"><meta name="copyright" content="Muite"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="入门使用MybatisPlus的基本步骤 引入MybatisPls依赖，代替Mybatis依赖 12345&lt;dependency&gt;    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;    &lt;version&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="笔记-MyBatisPlus">
<meta property="og:url" content="https://mutesniper.github.io/2025/04/19/MyBatisPlus/index.html">
<meta property="og:site_name" content="Muite">
<meta property="og:description" content="入门使用MybatisPlus的基本步骤 引入MybatisPls依赖，代替Mybatis依赖 12345&lt;dependency&gt;    &lt;groupId&gt;com.baomidou&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;mybatis-plus-boot-starter&lt;&#x2F;artifactId&gt;    &lt;version&amp;">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg">
<meta property="article:published_time" content="2025-04-19T04:46:00.000Z">
<meta property="article:modified_time" content="2025-04-19T09:29:44.869Z">
<meta property="article:author" content="Muite">
<meta property="article:tag" content="note">
<meta property="article:tag" content="SSM">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "笔记-MyBatisPlus",
  "url": "https://mutesniper.github.io/2025/04/19/MyBatisPlus/",
  "image": "https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg",
  "datePublished": "2025-04-19T04:46:00.000Z",
  "dateModified": "2025-04-19T09:29:44.869Z",
  "author": [
    {
      "@type": "Person",
      "name": "Muite",
      "url": "https://mutesniper.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://mutesniper.github.io/2025/04/19/MyBatisPlus/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '笔记-MyBatisPlus',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/1990ee2c41564e328f35ac72f555f170.jpeg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg" onerror="this.onerror=null;this.src='/null'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"></a><a class="nav-page-title" href="/"><span class="site-name">笔记-MyBatisPlus</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">笔记-MyBatisPlus</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-04-19T04:46:00.000Z" title="Created 2025-04-19 12:46:00">2025-04-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-04-19T09:29:44.869Z" title="Updated 2025-04-19 17:29:44">2025-04-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java-note/">java-note</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h1><h3 id="使用MybatisPlus的基本步骤"><a href="#使用MybatisPlus的基本步骤" class="headerlink" title="使用MybatisPlus的基本步骤"></a>使用MybatisPlus的基本步骤</h3><ul>
<li><p>引入MybatisPls依赖，代替Mybatis依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>定义Mapper接口并继承BaseMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt;&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>泛型为与数据库记录类型相对应的bean。</p>
</li>
<li><p>在实体类上添加注解声名表信息</p>
</li>
<li><p>在<code>applicaton.yml</code>中根据需要添加配置</p>
</li>
</ul>
<h2 id="常见注解"><a href="#常见注解" class="headerlink" title="常见注解"></a>常见注解</h2><p>在了解常用注解之前，我们先来看看MybatisPlus是如何直到我们要访问哪张表，又是怎么知道表中有哪些信息的呢？</p>
<p>其实，我们由于指定了泛型，所以MybatisPlus可以通过扫描实体类，并基于反射获取实体类信息作为数据库表信息。</p>
<p>规则如下：</p>
<ul>
<li>类名驼峰转下划线作为表名</li>
<li>名为id的字段作为主键</li>
<li>变量名驼峰转下划线作为表的字段名</li>
</ul>
<p>（约定大于配置）</p>
<p>但当我们没有遵守约定时，要怎么定义表名、字段名、主键名呢？</p>
<p>那么就需要用到注解。</p>
<p>常见注解：</p>
<ul>
<li><p>@TableName：用来指定表名</p>
</li>
<li><p>@Tabled：用来指定表中主键字段信息（一定要有一个主键）</p>
<p>主键还可以指定类型（自增长等），使用@Tabled注解中的type参数。(不指定默认为雪花算法生成的long类型值)</p>
<ul>
<li>AUTO：数据库对id进行自增长</li>
<li>INPUT：通过set方法自行输入</li>
<li>ASSIGN_ID：分配ID，接口IdentifierGenerator的方法nextId来生成id，默认实现类为DefaultIdentifierGenerator雪花算法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableId(value=&quot;id&quot;  ,type=IdType.AUTO )</span></span><br><span class="line">         <span class="comment">//数据库主键名       //枚举类IdType</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>@TableField：用来指定表中普通字段信息</p>
<p>使用@TableField的场景：</p>
<ul>
<li>成员变量名与数据库字段名不一致</li>
<li>成员变量名以is开头，且是布尔值（这种情况经过反射处理会把is去掉，以后面的名称作为字段名，导致映射失败）</li>
<li>成员变量名与数据库关键字冲突，（例如order指定为@TableField(“`order`“)）</li>
<li>成员变量不是数据库字段（ @TableField(exist&#x3D;false) ）</li>
</ul>
</li>
</ul>
<p>更多注解参考<a target="_blank" rel="noopener" href="https://baomidou.com/reference/annotation/">注解配置 | MyBatis-Plus</a></p>
<h2 id="常见配置"><a href="#常见配置" class="headerlink" title="常见配置"></a>常见配置</h2><img src="../assets/屏幕截图 2025-04-05 111217.png" alt="屏幕截图 2025-04-05 111217"  />

<ul>
<li>别名扫描包指定的包应为pojo所在包，其中包的别名默认为类名（不包含包的全路径）。这样在使用时会方便很多。</li>
</ul>
<p>其他配置参考<a target="_blank" rel="noopener" href="https://baomidou.com/reference/#_top">使用配置 | MyBatis-Plus</a></p>
<h1 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h1><h2 id="条件构造器"><a href="#条件构造器" class="headerlink" title="条件构造器"></a>条件构造器</h2><p>MybatisPlus支持各种复杂的where条件，可以满足日常开发的所有需求。</p>
<p>wrapper的体系结构：</p>
<img src="../assets/屏幕截图 2025-04-05 115515.png" alt="屏幕截图 2025-04-05 115515" style="zoom:75%;" />

<p>下面来演示其中UpdateWrapper和QueryWrapper两个条件构造器的使用</p>
<ul>
<li>QueryWrapper</li>
</ul>
<p>需求以及原本的sql语句实现：</p>
<p>![屏幕截图 2025-04-05 115634](..&#x2F;assets&#x2F;屏幕截图 2025-04-05 115634.png)</p>
<p>使用mp：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.构建查询条件</span></span><br><span class="line">QueryWrapper&lt;User&gt; wrapper =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">        .select(<span class="string">&quot;id&quot;</span>,<span class="string">&quot;username&quot;</span>,<span class="string">&quot;info&quot;</span>,<span class="string">&quot;balance&quot;</span>)</span><br><span class="line">        .like(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;o&quot;</span>)</span><br><span class="line">        .ge(<span class="string">&quot;balance&quot;</span>,<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//2.查询：</span></span><br><span class="line">List&lt;User&gt; users=userMapper.selectList(wrapper);</span><br><span class="line">users.forEach(System.out::println);</span><br></pre></td></tr></table></figure>



<img src="../assets/屏幕截图 2025-04-05 115640.png" alt="屏幕截图 2025-04-05 115640" style="zoom:75%;" />



<p>使用mp：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.要更新的数据：</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setBalance(<span class="number">2000</span>);</span><br><span class="line"><span class="comment">//2.更新的条件：</span></span><br><span class="line">QueryWrapper&lt;User&gt; wrapper =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;()</span><br><span class="line">        .eq(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line"><span class="comment">//3.执行更新</span></span><br><span class="line">userMapper.update(user,wrapper);</span><br></pre></td></tr></table></figure>



<ul>
<li>UpdateWrapper</li>
</ul>
<img src="../assets/屏幕截图 2025-04-05 120539.png" alt="屏幕截图 2025-04-05 120539" style="zoom:75%;" />

<p>使用mp：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Long&gt; ids=List.of(<span class="number">1L</span>,<span class="number">2L</span>,<span class="number">4L</span>);</span><br><span class="line">UpdateWrapper&lt;User&gt; wrapper =<span class="keyword">new</span> <span class="title class_">UpdateWrapper</span>&lt;User&gt;()</span><br><span class="line">        .setSql(<span class="string">&quot;balance=balance-200&quot;</span>)</span><br><span class="line">        .in(<span class="string">&quot;id&quot;</span>,ids);</span><br><span class="line">userMapper.update(<span class="literal">null</span>,wrapper);</span><br></pre></td></tr></table></figure>





<p>除了这两wrapper之外，还有lambda的wrapper，这是由于比如说在上面的演示中，我们把字段名都写死了，造成了硬编码的问题。lambda的wrapper就是用来解决这种问题的。</p>
<p>演示lambdaQueryWrapper:</p>
<p>例如使用lambdaQueryWrapper来代替上面演示的第一种QueryWrapper的用法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.构建查询条件</span></span><br><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper =<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;()</span><br><span class="line">        .select(User::getId,User::getUsername,User::getInfo,User::getBalance)</span><br><span class="line">        .like(User::getUsername,<span class="string">&quot;o&quot;</span>)</span><br><span class="line">        .ge(User::getBalance,<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//2.查询：</span></span><br><span class="line">List&lt;User&gt; users=userMapper.selectList(wrapper);</span><br><span class="line">users.forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>特性</th>
<th><code>QueryWrapper</code></th>
<th><code>LambdaQueryWrapper</code></th>
</tr>
</thead>
<tbody><tr>
<td>字段引用方式</td>
<td>字符串</td>
<td>Lambda 表达式</td>
</tr>
<tr>
<td>拼写错误风险</td>
<td>高</td>
<td>低</td>
</tr>
<tr>
<td>IDE 支持</td>
<td>不支持自动补全和重构</td>
<td>支持自动补全和重构</td>
</tr>
<tr>
<td>编译期检查</td>
<td>无</td>
<td>有</td>
</tr>
<tr>
<td>适用场景</td>
<td>动态字段名</td>
<td>静态字段名</td>
</tr>
</tbody></table>
<ul>
<li><p>QueryWrapper和lambdaQueryWrapper通常用来构建select、delete、update、where条件部分</p>
</li>
<li><p>UpdateWrapper和LambdaUpdateWrapper通常只有在set语句比较特殊时才使用</p>
</li>
<li><p>在开发过程中，尽量使用lambdaQueryWrapper和lambdaUpdateWrapper，避免硬编码</p>
</li>
</ul>
<h2 id="自定义SQL"><a href="#自定义SQL" class="headerlink" title="自定义SQL"></a>自定义SQL</h2><p>我们可以利用mp的wrapper来构建复杂的where条件，然后自己定义sql语句剩下的部分。</p>
<p>示例：</p>
<img src="../assets/屏幕截图 2025-04-05 124356.png" alt="屏幕截图 2025-04-05 124356" style="zoom:75%;" />

<p>这就保证了不在业务层编写sql，遵循了企业规范，同时又用mp简化了代码开发。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.模拟前端传给我们的更新条件</span></span><br><span class="line">List&lt;Long&gt; ids=List.of(<span class="number">1L</span>,<span class="number">2L</span>,<span class="number">4L</span>);</span><br><span class="line"><span class="type">int</span> amount=<span class="number">200</span>;</span><br><span class="line"><span class="comment">//2.定义条件</span></span><br><span class="line">QueryWrapper&lt;User&gt; wrapper =<span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;User&gt;().in(<span class="string">&quot;id&quot;</span>,ids);</span><br><span class="line"><span class="comment">//3.调用自定义方法</span></span><br><span class="line">userMapper.updateBalanceByIds(wrapper,amount);</span><br></pre></td></tr></table></figure>

<p>mapper接口中方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">updateBalanceByIds</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;User&gt; wrapper,</span></span><br><span class="line"><span class="params">                        <span class="meta">@Param(&quot;amount&quot;)</span> <span class="type">int</span> amount)</span>;</span><br></pre></td></tr></table></figure>

<p>mapper.xml中的sql拼接：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlanceByIds&quot;</span>&gt;</span></span><br><span class="line">    update user set balance=balance-#&#123;amount&#125; $&#123;ew.customSqlSegment&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>还可以将sql拼接直接写在方法上：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Update(&quot; update user set balance=balance-#&#123;amount&#125; $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateBalanceByIds</span><span class="params">(<span class="meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;User&gt; wrapper,</span></span><br><span class="line"><span class="params">                        <span class="meta">@Param(&quot;amount&quot;)</span> <span class="type">int</span> amount)</span>;</span><br></pre></td></tr></table></figure>



<h2 id="Service接口"><a href="#Service接口" class="headerlink" title="Service接口"></a>Service接口</h2><p>service接口中有更多的方法。</p>
<p>在使用时，我们需要让UserService接口继承IService接口，并且mp给我们提供了一个IService的实现类ServiceImpl，我们的UserServiceImpl不仅要实现UserService，还要继承ServiceImpl。（因为如果仅仅让UserService继承IService接口，再让UserServiceImpl实现UserService接口，那么就需要重写IService中的很多方法，达不到简化代码编写的目的）</p>
<p>举例：</p>
<p>自定义service接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">implements</span> <span class="title class_">IService</span>&lt;User&gt;&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>service实现类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>测试：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> IUserService userService;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSaveUser</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setId(<span class="number">5L</span>);</span><br><span class="line">    user.setUsername(<span class="string">&quot;Lucy&quot;</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">    user.setPhone(<span class="string">&quot;18688990011&quot;</span>);</span><br><span class="line">    user.setBalance(<span class="number">200</span>);</span><br><span class="line">    user.setInfo(<span class="string">&quot;&#123;\&quot;age\&quot;: 24, \&quot;intro\&quot;: \&quot;英文老师\&quot;, \&quot;gender\&quot;: \&quot;female\&quot;&#125;&quot;</span>);</span><br><span class="line">    user.setCreateTime(LocalDateTime.now());</span><br><span class="line">    user.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    userService.save(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="怎么选择使用service还是mapper中的方法"><a href="#怎么选择使用service还是mapper中的方法" class="headerlink" title="怎么选择使用service还是mapper中的方法"></a>怎么选择使用service还是mapper中的方法</h3><p>业务较为简单，只需要基础的增删改查时，直接调用mp在service中提供的方法即可。</p>
<p>如果需要执行一些业务，可以自定义service，在里面定义一些业务逻辑。</p>
<p>如果baseMapper和IService中的方法不足以满足增删改查需求了，就需要自定义mapper并定义方法以自定义sql语句。</p>
<p>综上，其实basemapper中的方法用到的比较少。</p>
<h2 id="Lambda方法"><a href="#Lambda方法" class="headerlink" title="Lambda方法"></a>Lambda方法</h2><p>x示例：<br><img src="../assets/屏幕截图 2025-04-05 135514.png" alt="屏幕截图 2025-04-05 135514" style="zoom:75%;" /></p>
<p>mybatis原生写法:</p>
<img src="../assets/屏幕截图 2025-04-05 135525.png" alt="屏幕截图 2025-04-05 135525" style="zoom:75%;" />

<p>lambda查询写法：</p>
<p>定义UserQuery类来接收过滤条件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controller：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/list&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUsers</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    List&lt;User&gt; users=userService.queryUsers(query.getName(),query.getStatus(),query.getMaxBalance(),query.getMinBalance());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在service接口中定义方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">queryUsers</span><span class="params">(String name,Integer status,Integer minBalance,Integer MaxBalace)</span>;</span><br></pre></td></tr></table></figure>

<p>实现方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">queryUsers</span><span class="params">(String name,Integer status,Integer minBalance,Integer maxBalance)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> lambdaQuery()</span><br><span class="line">            .like(name!=<span class="literal">null</span>,User::getUsername,name)</span><br><span class="line">            .eq(status!=<span class="literal">null</span>,User::getStatus,status)</span><br><span class="line">            .ge(minBalance!=<span class="literal">null</span>,User::getMinBalance,minBalance)</span><br><span class="line">            .le(maxBalance!=<span class="literal">null</span>,User::getMaxBalance,maxBalance)</span><br><span class="line">            .list();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>同时还有lambdaUpdate()，参考<a target="_blank" rel="noopener" href="https://baomidou.com/guides/data-interface/#chain">持久层接口 | MyBatis-Plus</a></p>
<p>lambda主要用于复杂条件。</p>
<h2 id="Iservice批量新增"><a href="#Iservice批量新增" class="headerlink" title="Iservice批量新增"></a>Iservice批量新增</h2><p>需求：</p>
<p>批量插入10万条用户数据</p>
<ul>
<li><p>普通for循环插入</p>
<img src="../assets/屏幕截图 2025-04-05 151743.png" alt="屏幕截图 2025-04-05 151743" style="zoom:75%;" />

<p>这种方法每插入一条都要发一次网络请求，但网络请求是比较慢的，就造成了这种方式很慢</p>
</li>
<li><p>默认情况下mp的批量新增：</p>
<img src="../assets/屏幕截图 2025-04-05 151755.png" alt="屏幕截图 2025-04-05 151755" style="zoom:75%;" />

<p>​	这样虽然1000条才发一次网络请求，但每次新增仍然是一条sql语句。</p>
<p>​	我们想要如下格式来增加性能：</p>
<p>​	<img src="../assets/屏幕截图 2025-04-05 152014.png" alt="屏幕截图 2025-04-05 152014" style="zoom:75%;" /></p>
</li>
<li><p>在jdbc的url中添加参数<code>rewriteBatchedStatements=true</code>即可</p>
</li>
</ul>
<h1 id="扩展功能"><a href="#扩展功能" class="headerlink" title="扩展功能"></a>扩展功能</h1><h2 id="代码生成器"><a href="#代码生成器" class="headerlink" title="代码生成器"></a>代码生成器</h2><p>MybatisX或MyBatisPlus</p>
<h2 id="Db静态工具"><a href="#Db静态工具" class="headerlink" title="Db静态工具"></a>Db静态工具</h2><p> Db静态工具中的方法基本与IService中的方法一致，但其都是静态方法，无法指定泛型，为了获取器操作的对象的类型，传参时某些方法就需要传入class。</p>
<p>既然Db静态工具与IService中的方法大致相同，那为什么还需要Db呢？</p>
<p>为了对数据库表进行操作，我们需要针对其定义Mapper、Service。但由于Iservice中的方法功能更加强大，我们更倾向于使用Service。但如果我们在一个Service中需要查到另一张表中的数据，就要注入另一张表的Service。那么如果出现双向注入的情况，就会产生循环依赖的问题。</p>
<p>因此，Db的产生还是很有必要的。</p>
<p>举例：</p>
<p>编写根据id批量查询用户的接口，查询用户，并查询出用户对应的所有地址</p>
<p>controller的代码省略，重点不在这。</p>
<p>UserServiceImpl中的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;UserVO&gt; <span class="title function_">queryUserAndAddressByIds</span><span class="params">(List&lt;Long&gt; ids)</span>&#123;</span><br><span class="line">    <span class="comment">//1.查询用户</span></span><br><span class="line">    List&lt;User&gt; users=listByIds(ids);<span class="comment">//listByIds也是本类方法</span></span><br><span class="line">    <span class="keyword">if</span>(CollUtil.isEmpty(users))&#123;</span><br><span class="line">        <span class="keyword">return</span> Collections.emptyList();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.查询地址</span></span><br><span class="line">    <span class="comment">//2.1获取用户id集合</span></span><br><span class="line">    List&lt;Long&gt; userIds=users.stream().map(User::getId).collect(Collectors.toList());</span><br><span class="line">    <span class="comment">//2.2根据用户id查询地址</span></span><br><span class="line">    List&lt;Address&gt; addresses= Db.lambdaQuery(Address.class).in(Address::getUserId,userIds).list();</span><br><span class="line">    <span class="comment">//2.3转换地址VO</span></span><br><span class="line">    List&lt;AddressVO&gt; addressVOList=BeanUtil.copyToList(addresses,AddressVO.class);</span><br><span class="line">    <span class="comment">//2.4用户地址集合分组处理，相同用户的分为一组</span></span><br><span class="line">    Map&lt;Long,List&lt;AddressVO&gt;&gt; addressMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(CollUtil.isNotEmpty(addressVOList))&#123;</span><br><span class="line">        addressMap=addressVOList.stream().collect(Collectors.groupingBy(AddressVO::getUserId));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.转换VO返回</span></span><br><span class="line">    List&lt;UserVO&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(users.size());</span><br><span class="line">    <span class="keyword">for</span>(User user:users)&#123;</span><br><span class="line">        <span class="comment">//3.1转换User的PO为VO</span></span><br><span class="line">        UserVO vo= BeanUtil.copyProperties(user,UserVO.class);</span><br><span class="line">        list.add(vo);</span><br><span class="line">        <span class="comment">//3.2转换地址VO</span></span><br><span class="line">        vo.setAddresses(addressMap.get(user.getId()));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种方法是比拿到每个用户的id , 顺便用这个id查询地址的效率要高的。</p>
<h2 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h2><p>逻辑删除就是基于代码逻辑模拟删除的效果，但并不会真正的删除数据。思路如下：</p>
<ul>
<li>在表中添加一个字段标记数据是否被删除</li>
<li>当删除数据时把标记设置为1</li>
<li>查询时只查询标记为0的数据</li>
</ul>
<img src="../assets/屏幕截图 2025-04-06 102046.png" alt="屏幕截图 2025-04-06 102046" style="zoom:67%;" />

<p>我们发现如果这样，那增删改查都需要加上deleted条件，而mp本身并没有给我们提供加上了deleted条件的方法。那这样mp就不能用了吗？</p>
<img src="../assets/屏幕截图 2025-04-06 102220.png" alt="屏幕截图 2025-04-06 102220" style="zoom: 67%;" />

<p>接下来再调用removeById方法，执行的就是将flag改为1，而不是直接删除记录。</p>
<p>以上进行的配置是全局配置，我们还可以单独针对某一张表实现逻辑删除，只需要在表对应的实体类的对应成员变量上添加<code>@TableLogic</code>注解。</p>
<p><strong>此外，我们还可以自定义注解实现逻辑删除：</strong></p>
<p>如果你没有使用 MyBatis-Plus，或者需要更灵活的逻辑删除功能，可以通过自定义注解和 AOP（面向切面编程）来实现。</p>
<p>(1) 定义逻辑删除注解</p>
<p>创建一个自定义注解 <code>@LogicalDelete</code>：</p>
<p>java深色版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import java.lang.annotation.ElementType;</span><br><span class="line">import java.lang.annotation.Retention;</span><br><span class="line">import java.lang.annotation.RetentionPolicy;</span><br><span class="line">import java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line">@Target(ElementType.METHOD)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">public @interface LogicalDelete &#123;</span><br><span class="line">    String value(); // 删除条件字段名</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2) 编写 AOP 切面</p>
<p>使用 AOP 拦截带有 <code>@LogicalDelete</code> 注解的方法，并执行逻辑删除操作：</p>
<p>java深色版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import org.aspectj.lang.annotation.Aspect;</span><br><span class="line">import org.aspectj.lang.annotation.Before;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">@Aspect</span><br><span class="line">@Component</span><br><span class="line">public class LogicalDeleteAspect &#123;</span><br><span class="line"></span><br><span class="line">    @Before(&quot;@annotation(logicalDelete)&quot;)</span><br><span class="line">    public void handleLogicalDelete(LogicalDelete logicalDelete) &#123;</span><br><span class="line">        String field = logicalDelete.value();</span><br><span class="line">        System.out.println(&quot;执行逻辑删除，更新字段: &quot; + field + &quot; = 1&quot;);</span><br><span class="line">        // 在这里编写实际的 SQL 更新逻辑</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(3) 在 Service 方法上使用注解</p>
<p>在需要逻辑删除的地方，添加 <code>@LogicalDelete</code> 注解：</p>
<p>java深色版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line">@Service</span><br><span class="line">public class UserService &#123;</span><br><span class="line"></span><br><span class="line">    @LogicalDelete(&quot;is_deleted&quot;)</span><br><span class="line">    public void deleteUser(Long userId) &#123;</span><br><span class="line">        // 这里的方法体可以为空，AOP 会拦截并执行逻辑删除</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>逻辑删除本身也有自己的问题，比如：</p>
<ul>
<li>会导致数据库表垃圾数据越来越多，影响查询效率</li>
<li>SQL中全都需要对逻辑删除字段做判断，影响查询效率</li>
</ul>
<h2 id="枚举处理器"><a href="#枚举处理器" class="headerlink" title="枚举处理器"></a>枚举处理器</h2><p>当有一些成员变量的取值是有限的时候，比如说用户状态，这时如果用0，1等数字去表示，不仅在开发时会造成不便，也会使代码可读性变得很差。那么这时可以使用枚举类型，枚举类型的成员变量包括int类型的value，还有String类型的描述。然后我们就可以把原本类型是int的成员变量改为类型为枚举类型。（如果存在VO也要改）</p>
<p>但这又造成了一个问题，java代码中此变量是枚举类型的，但是在数据库中定义的是int类型的。</p>
<p>在之前，如果java和数据库中的类型是不一样的，是由mybatis在底层给我们进行转换的（见<code>org.apache.ibatis.type</code>包下的BaseTypeHandler）。但是它定义的Enum类型相关的转换不能满足我们的要求。</p>
<p>但是mp又给我们定义了一个更强大的关于enum类型转换的handler，叫做MybatisEnumTypeHandler。</p>
<p>如何使用：</p>
<ul>
<li><p>给枚举类型中的int变量加上@EnumValue注解，这样就知道是将这个值存入数据库。</p>
</li>
<li><p>加上配置启用handler。</p>
<img src="../assets/屏幕截图 2025-04-06 105255.png" alt="屏幕截图 2025-04-06 105255" style="zoom:75%;" />
</li>
<li><p>在给前端返回时，默认返回的时枚举项的名字，要想返回枚举项的某一个成员变量，给枚举类中的对应成员变量加上<code>@JsonValue</code>注解。</p>
</li>
</ul>
<h2 id="Json处理器"><a href="#Json处理器" class="headerlink" title="Json处理器"></a>Json处理器</h2><p>除了上面的枚举处理器之外，mp还定义了一个AbstractJsonTypeHandler，用于将数据库中json类型的字段转换。</p>
<p>默认数据库中的json字段能够转成java中的string对象，但这样想要取出此json字段里面的某个值，就很不方便。</p>
<p>于是我们自定义一个对象，对象的成员变量去对应json里的key，并使用JacksonTypeHandler（AbstractJsonTypeHandler的实现类），进行json和对象之间的转化。</p>
<p>使用方法：</p>
<ul>
<li>此处理器没有全局配置来开启。只能使用注解。</li>
<li>在po（和vo）中对应的变量的类型改为对应json的类型。</li>
<li>在po的成员变量上加上注解<code>@TableField(value=&quot;&quot;,TypeHandler=JacksonTypeHandler.class)</code></li>
<li>因为实体类中存在复杂类型字段（自定义的类型），需要开启自动结果集映射。在实体类上加上<code>@TableName(value=&quot;user&quot;,autoResultMap=true)</code></li>
</ul>
<h1 id="插件功能"><a href="#插件功能" class="headerlink" title="插件功能"></a>插件功能</h1><img src="../assets/屏幕截图 2025-04-06 120831.png" alt="屏幕截图 2025-04-06 120831" style="zoom: 67%;" />



<h2 id="分页插件"><a href="#分页插件" class="headerlink" title="分页插件"></a>分页插件</h2><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>在配置类中注册MyBatisPlus的核心插件，同时添加分页插件：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">//1.创建分页插件</span></span><br><span class="line">        <span class="type">PaginationInnerInterceptor</span> <span class="variable">paginationInnerInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>();</span><br><span class="line">        paginationInnerInterceptor.setMaxLimit(<span class="number">1000L</span>);</span><br><span class="line">        <span class="comment">//2.添加分页插件</span></span><br><span class="line">        interceptor.addInnerInterceptor(paginationInnerInterceptor);</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实现分页功能：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testPageQuery</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">int</span> pageNo=<span class="number">1</span>;</span><br><span class="line">    <span class="type">int</span> pageSize=<span class="number">2</span>;</span><br><span class="line">    <span class="comment">//1.准备分页条件</span></span><br><span class="line">    <span class="comment">//1.1分页条件</span></span><br><span class="line">    Page&lt;User&gt; page=Page.of(pageNo,pageSize);</span><br><span class="line">    <span class="comment">//1.2排序条件</span></span><br><span class="line">    <span class="comment">//可以多个参数排序，第一个相等就用第二个比较</span></span><br><span class="line">    <span class="comment">//false代表降序</span></span><br><span class="line">    page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;balance&quot;</span>,<span class="literal">false</span>));</span><br><span class="line">    page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;createTime&quot;</span>,<span class="literal">false</span>));</span><br><span class="line">    <span class="comment">//2.分页查询</span></span><br><span class="line">    uuserService.page(page);</span><br><span class="line">    <span class="comment">//3.解析</span></span><br><span class="line">    <span class="type">long</span> total=page.getTotal();</span><br><span class="line">    <span class="type">long</span> <span class="variable">pages</span> <span class="operator">=</span> page.getPages();</span><br><span class="line">    List&lt;User&gt; users=page.getRecords();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="实例：通用分页实体"><a href="#实例：通用分页实体" class="headerlink" title="实例：通用分页实体"></a>实例：通用分页实体</h3><p>统一查询条件及返回值的结构。 </p>
<p>需求：<br><img src="../assets/屏幕截图 2025-04-06 130303.png" alt="屏幕截图 2025-04-06 130303" style="zoom:75%;" /></p>
<p>返回值：</p>
<img src="../assets/屏幕截图 2025-04-06 130310.png" alt="屏幕截图 2025-04-06 130310" style="zoom:75%;" />

<p><strong>先定义查询条件的实体</strong></p>
<p>UserQuery:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserQuery</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer status;</span><br><span class="line">    <span class="keyword">private</span> Integer minBalance;</span><br><span class="line">    <span class="keyword">private</span> Integer maxBalance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据需求，我们还需要封装一些page相关的参数，虽然可以直接封装在此类中，但是在实际业务中，不只是查询user时需要这些page相关的参数，所以定义一个单独的分页查询实体类</p>
<p>PageQuery:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer pageNo;</span><br><span class="line">    <span class="keyword">private</span> Integer pageSize;</span><br><span class="line">    <span class="keyword">private</span> String SortBy;</span><br><span class="line">    <span class="keyword">private</span> Boolean isAsc;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那么就需要让UserQuery继承PageQuery。</p>
<p>返回值结构：</p>
<p>PageDTO:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="keyword">private</span> Long pages;</span><br><span class="line">    <span class="keyword">private</span> List&lt;?&gt; list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>controller:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/page&quot;)</span></span><br><span class="line"> <span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">     <span class="keyword">return</span> userService.queryUserPage(query);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>UserServiceImpl:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    String name=query.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span>query.getStatus();</span><br><span class="line">    <span class="comment">//1.构建查询条件</span></span><br><span class="line">    <span class="comment">//1.1分页条件</span></span><br><span class="line">    Page&lt;User&gt; page= Page.of(query.getPageNo(),query.getPageSize());</span><br><span class="line">    <span class="comment">//1.2排序条件</span></span><br><span class="line">    <span class="keyword">if</span>(StrUtil.isNotBlank(query.getSortBy()))&#123;</span><br><span class="line">        page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(query.getSortBy(),query.getIsAsc()));</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;update_time&quot;</span>,<span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.分页查询</span></span><br><span class="line">    lambdaQuery()</span><br><span class="line">            .like(name!=<span class="literal">null</span>,User::getUsername,name)</span><br><span class="line">            .eq(status!=<span class="literal">null</span>,User::getStatus,status)</span><br><span class="line">            .page(page);</span><br><span class="line">    <span class="comment">//3.封装VO结果</span></span><br><span class="line">    PageDTO&lt;UserVO&gt; dto=<span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">//3.1总条数</span></span><br><span class="line">    dto.setTotal(page.getTotal());</span><br><span class="line">    <span class="comment">//3.2总页数</span></span><br><span class="line">    dto.setPages(page.getPages());</span><br><span class="line">    <span class="comment">//3.3当前页数据</span></span><br><span class="line">    List&lt;User&gt; records =page.getRecords();</span><br><span class="line">    <span class="keyword">if</span>(CollUtil.isNotEmpty(records)) &#123;</span><br><span class="line">        dto.setList(Collections.emptyList());</span><br><span class="line">        <span class="keyword">return</span> dto;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3.4拷贝user的VO</span></span><br><span class="line">    dto.setList(BeanUtil.copyToList(records,UserVO.class));</span><br><span class="line">    <span class="comment">//4.返回</span></span><br><span class="line">    <span class="keyword">return</span> dto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="通用分页实体改进"><a href="#通用分页实体改进" class="headerlink" title="通用分页实体改进"></a>通用分页实体改进</h3><p>发现在如上UserServiceImpl中，将query条件封装成page对象的过程（即1过程）比较麻烦，且跟业务没什么关系（逻辑是通用的），最好把它做成一个工具。</p>
<p>并且3过程也可以封装。</p>
<p>所以需求如下：<br><img src="../assets/屏幕截图 2025-04-06 133530.png" alt="屏幕截图 2025-04-06 133530" style="zoom:75%;" /></p>
<p>PageQuery：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageQuery</span> &#123;</span><br><span class="line">    <span class="comment">//给默认值，前端提交则覆盖。访问空指针报错</span></span><br><span class="line">    <span class="keyword">private</span> Integer pageNo=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">private</span> Integer pageSize=<span class="number">5</span>;</span><br><span class="line">    <span class="keyword">private</span> String SortBy;</span><br><span class="line">    <span class="keyword">private</span> Boolean isAsc=<span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPage</span><span class="params">(OrderItem ... items)</span> &#123;</span><br><span class="line">        <span class="comment">//1分页条件</span></span><br><span class="line">        Page&lt;T&gt; page= Page.of(pageNo,pageSize);</span><br><span class="line">        <span class="comment">//2排序条件</span></span><br><span class="line">        <span class="keyword">if</span>(StrUtil.isNotBlank(SortBy))&#123;</span><br><span class="line">            page.addOrder(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(SortBy,isAsc);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(items!=<span class="literal">null</span>)&#123;</span><br><span class="line">            page.addOrder(items);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//常用createTime作为SortBy为空时的默认排序，所以单独再写一个方法</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPageDefaultSortByCreateTime</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> toMpPage(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;createTime&quot;</span>,<span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//常用UpdateTime作为SortBy为空时的默认排序，所以单独再写一个方法</span></span><br><span class="line">    <span class="keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="title function_">toMpPageDefaultSortByUpdateTime</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> toMpPage(<span class="keyword">new</span> <span class="title class_">OrderItem</span>(<span class="string">&quot;updateTime&quot;</span>,<span class="literal">false</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>PageDTO:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageDTO</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="keyword">private</span> Long pages;</span><br><span class="line">    <span class="keyword">private</span> List&lt;?&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;PO,VO&gt;  PageDTO&lt;VO&gt; <span class="title function_">of</span><span class="params">(Page&lt;PO&gt; page, Class&lt;VO&gt; clazz)</span>&#123;</span><br><span class="line">        PageDTO&lt;VO&gt; dto=<span class="keyword">new</span> <span class="title class_">PageDTO</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//1总条数</span></span><br><span class="line">        dto.setTotal(page.getTotal());</span><br><span class="line">        <span class="comment">//2总页数</span></span><br><span class="line">        dto.setPages(page.getPages());</span><br><span class="line">        <span class="comment">//3当前页数据</span></span><br><span class="line">        List&lt;PO&gt; records =page.getRecords();</span><br><span class="line">        <span class="keyword">if</span>(CollUtil.isNotEmpty(records)) &#123;</span><br><span class="line">            dto.setList(Collections.emptyList());</span><br><span class="line">            <span class="keyword">return</span> dto;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4拷贝user的VO</span></span><br><span class="line">        dto.setList(BeanUtil.copyToList(records,clazz));</span><br><span class="line">        <span class="comment">//5.返回</span></span><br><span class="line">        <span class="keyword">return</span> dto;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UserServiceImpl:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageDTO&lt;UserVO&gt; <span class="title function_">queryUsersPage</span><span class="params">(UserQuery query)</span>&#123;</span><br><span class="line">    String name=query.getName();</span><br><span class="line">    <span class="type">Integer</span> <span class="variable">status</span> <span class="operator">=</span>query.getStatus();</span><br><span class="line">    <span class="comment">//1.构建分页条件</span></span><br><span class="line">    Page&lt;User&gt; page=query.toMpPageDefaultSortByUpdateTime();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.分页查询</span></span><br><span class="line">    lambdaQuery()</span><br><span class="line">            .like(name!=<span class="literal">null</span>,User::getUsername,name)</span><br><span class="line">            .eq(status!=<span class="literal">null</span>,User::getStatus,status)</span><br><span class="line">            .page(page);</span><br><span class="line">    <span class="comment">//3.封装VO结果</span></span><br><span class="line">    <span class="keyword">return</span> PageDTO.of(page,UserVO.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>







<p>以上工具类的PO转VO是调用copyToList方法自动转化的，如果想要自己转化（方便执行一些业务逻辑），可以如下来做：</p>
<p>将上面PageDTO中的of方法的形参改为：</p>
<p><code>public static &lt;PO,VO&gt;  PageDTO&lt;VO&gt; of(Page&lt;PO&gt; page, Function&lt;PO,VO&gt; convertor)</code></p>
<p>第4步拷贝语句改为：</p>
<p><code>dto.setList(records.stream().map(convertor).collect(Collectors.toList()));</code></p>
<p>接着UserServiceImpl中方法的返回值可以改为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> PageDTO.of(page,user -&gt; &#123;</span><br><span class="line">	<span class="comment">//1.拷贝基础属性</span></span><br><span class="line">	UserVO vo=BeanUtil.copyProperties(user,UserVO.class);</span><br><span class="line">	<span class="comment">//2.处理特殊逻辑，比如将用户名后两位隐藏，改为**。</span></span><br><span class="line">	vo.setUsername(vo.getUsername().subString(<span class="number">0</span>,vo.getUsername().length()-<span class="number">2</span>)+<span class="string">&quot;**&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> vo;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>





<p>但是这样封装工具方法都封装到了实体类内部，与mp耦合度很高。所以可以单独定义工具类，负责书写mp的page相关转换的方法。</p>
<p>要是不用mp，可以再定义其他工具类封装和其他工具的page转换相关的方法。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://mutesniper.github.io">Muite</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://mutesniper.github.io/2025/04/19/MyBatisPlus/">https://mutesniper.github.io/2025/04/19/MyBatisPlus/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/note/">note</a><a class="post-meta__tags" href="/tags/SSM/">SSM</a></div><div class="post-share"><div class="social-share" data-image="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/04/19/Docker/" title="笔记-Docker"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">笔记-Docker</div></div><div class="info-2"><div class="info-item-1">   在操作系统上安装容器运行时环境，利用容器的技术启动英应用，每个应用运行在自己的容器内部，每个容器包含了本应用运行的完整环境。 容器和容器之间互相隔离（应用和应用之间相互隔离），一个容器出现问题不会影响到其他容器。 而容器共享操作系统内核，但是拥有自己的文件系统、CPU、内存、进程空间。即类似于轻量级的VM。所以容器占用的资源比较少。 容器也可以实现跨平台部署（只要安装容器运行时环境）。 镜像和容器当我们利用Docker安装应用时，Docker会自动搜索并下载应用镜像（image）。镜像不仅包含应用本身，还包含应用运行所需要的环境、配置、系统函数库。Docker会在运行镜像时创建一个隔离环境，称为容器（container） 镜像仓库：存储和管理镜像的平台，Docker官方维护了一个公共仓库：Docker Hub     宿主机：容器所在的机器。这里的容器部署在虚拟机上，那么这台虚拟机就是宿主机。 命令解读以 123456docker run -d \	--name mysql \	-p 3306:3306 \	-e TZ=Asia/Shanghai \	-e...</div></div></div></a><a class="pagination-related" href="/2025/04/19/Kafka/" title="笔记-Kafka"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">笔记-Kafka</div></div><div class="info-2"><div class="info-item-1">运行启动Kafkajava8+ kafka可以使用zookeeper或kraft启动，但只能使用其中一种方式，不能同时使用； kraft是kafka的内置共识机制，用于取代zookeeper 下载kafka完成后：  使用zookeeper启动kafka：  进入kafka的bin目录中， zookeeper-server-start.sh ../config/zookeeper.properties &amp;：启动zookeeper（因为kafka安装包自带zookeeper的jar包），可以在不安装zookeeper的情况下运行zookeeper。&amp;表示后台运行。 kafka-server-start.sh ../config/server.properties &amp;：启动kafka kafka-server-stop.sh ../config/server.properties：关闭kafka zookeeper-server-start.sh...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/04/19/MyBatis/" title="笔记-MyBatis"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-19</div><div class="info-item-2">笔记-MyBatis</div></div><div class="info-2"><div class="info-item-1">简介MyBatis是持久层框架（和数据库进行交互的框架） MyBatis 不像 Hibernete 等这些全自动框架，它把关键的SQL部分交给程序员自己编写，而不是自动生成  HelloWorld步骤：  导入mybatis依赖  配置数据源  编写javabean对应数据库一个表模型  以前：Dao接口–&gt;Dao实现  。–&gt;标注@Repository注解 现在：Mapper接口–&gt;Mapper.xml实现 ,–&gt;标注@Mapper注解 （安装mybatisx插件自动为mapper类生成mapper文件，我们只需要在mapper文件中配置方法的sql语句）  告诉mybatis去哪里找mapper文件：mybatis.mapper-locations=classpath:mapper/**.xml   mapper接口： 1234@Mapper //告诉spring，这是MyBatis操作数据库用的接口public interface EmpMapper &#123;    Emp getEmpById(Integer...</div></div></div></a><a class="pagination-related" href="/2025/04/19/springboot/" title="笔记-SpringBoot"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-19</div><div class="info-item-2">笔记-SpringBoot</div></div><div class="info-2"><div class="info-item-1">简介SpringBoot 帮我们简单、快速地创建一个独立的、生产级别的 Spring 应用； 特性：  快速创建独立 Spring 应用  直接嵌入Tomcat、Jetty or Undertow  提供可选的 starter，简化应用整合  按需自动配置 Spring 以及 第三方库  提供生产级特性：如 监控指标、健康检查、外部化配置等  无代码生成、无xml； 都是基于自动配置技术   场景启动器SpringBoot场景启动器：官方写的启动器命名：spring-boot-starter-*。第三方启动器命名：*-spring-boot-starter ​	作用：场景启动器负责把当前场景需要用的jar包都导入进来 ​	每个场景启动器都有一个基础依赖：spring-boot-starter 依赖管理为什么项目依赖不需要写版本号？—maven父子继承，父项目可以锁定版本。 父项目不管理的包都需要添加版本号 *自动配置基本理解 自动配置 导入场景，容器中就会自动配置好这个场景的核心组件。如 Tomcat、SpringMVC、DataSource...</div></div></div></a><a class="pagination-related" href="/2025/04/19/spring/" title="笔记-Spring"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-19</div><div class="info-item-2">笔记-Spring</div></div><div class="info-2"><div class="info-item-1">简介spring是一个IoC和AOP框架 Spring的特性：  非侵入式：基于Spring开发的应用中的对象可以不依赖于Spring的API 依赖注入：DI（Dependency Injection）是反转控制（IoC：Inversion of Control）最经典的实现 面向切面编程：Aspect Oriented Programming ...</div></div></div></a><a class="pagination-related" href="/2025/04/19/springMVC/" title="笔记-SpringMVC"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-19</div><div class="info-item-2">笔记-SpringMVC</div></div><div class="info-2"><div class="info-item-1">简介 SpringMVC是spring的web模块，用来开发Web应用  SpringMVC应用最终作为B&#x2F;S、C&#x2F;S模式下的Server端  Web应用的核心就是处理Http请求响应   两种开发模式 前后不分离开发： 浏览器&#x2F;客户端发送请求，访问指定路径资源–&gt;服务端进行业务处理并用数据组装页面（服务端渲染）–&gt;服务端返回带数据的完整页面给浏览器&#x2F;客户端  前后分离开发： 前端和后端作为独立的部分进行开发，前端专注于用户界面的设计和交互，后端则专注于提供API接口和服务。前端通过AJAX或其他方式调用后端提供的RESTful API获取数据，动态更新页面内容。 前后端分离其实是数据和页面分离，数据由后端负责，页面由前端负责   Helloworld1234567891011@Controller//告诉spring这是一个控制器（处理请求的组件）public class HelloController &#123;    @ResponseBody//把返回值放到响应体中   ...</div></div></div></a><a class="pagination-related" href="/2025/04/19/String/" title="笔记-String"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-19</div><div class="info-item-2">笔记-String</div></div><div class="info-2"><div class="info-item-1">String:特性： 内容不会发生改变，它的对象在创建后不能被更改。如果进行修改则会创建一个新的字符串变量。 由于String对象不可变，所以它是线程安全的。  创建方法： 直接赋值： 1String name=&quot;... &quot;;  构造方法： 1234public String()public String(String original)public String(char[] chs)public String (byte[] chs)  方法： 获取长度：1str.length() 查找子串:1234//返回第一个指定字串的索引str.indexOf...</div></div></div></a><a class="pagination-related" href="/2025/03/17/maven%E5%9F%BA%E7%A1%80/" title="JAVA学习笔记-maven基础"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">JAVA学习笔记-maven基础</div></div><div class="info-2"><div class="info-item-1">简介在了解Maven之前，我们先来看看一个Java项目需要的东西。首先，我们需要确定引入哪些依赖包。例如，如果我们需要用到commons logging，我们就必须把commons...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg" onerror="this.onerror=null;this.src='/null'" alt="avatar"/></div><div class="author-info-name">Muite</div><div class="author-info-description">keep learning</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">21</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mutesniper"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/mutesniper" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%A5%E9%97%A8"><span class="toc-number">1.</span> <span class="toc-text">入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8MybatisPlus%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.0.1.</span> <span class="toc-text">使用MybatisPlus的基本步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.1.</span> <span class="toc-text">常见注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">常见配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">2.</span> <span class="toc-text">核心功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">2.1.</span> <span class="toc-text">条件构造器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89SQL"><span class="toc-number">2.2.</span> <span class="toc-text">自定义SQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Service%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.3.</span> <span class="toc-text">Service接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E9%80%89%E6%8B%A9%E4%BD%BF%E7%94%A8service%E8%BF%98%E6%98%AFmapper%E4%B8%AD%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">2.3.1.</span> <span class="toc-text">怎么选择使用service还是mapper中的方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda%E6%96%B9%E6%B3%95"><span class="toc-number">2.4.</span> <span class="toc-text">Lambda方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Iservice%E6%89%B9%E9%87%8F%E6%96%B0%E5%A2%9E"><span class="toc-number">2.5.</span> <span class="toc-text">Iservice批量新增</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD"><span class="toc-number">3.</span> <span class="toc-text">扩展功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">3.1.</span> <span class="toc-text">代码生成器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Db%E9%9D%99%E6%80%81%E5%B7%A5%E5%85%B7"><span class="toc-number">3.2.</span> <span class="toc-text">Db静态工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%88%A0%E9%99%A4"><span class="toc-number">3.3.</span> <span class="toc-text">逻辑删除</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">枚举处理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Json%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-number">3.5.</span> <span class="toc-text">Json处理器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E5%8A%9F%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">插件功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-number">4.1.</span> <span class="toc-text">分页插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">4.1.1.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E9%80%9A%E7%94%A8%E5%88%86%E9%A1%B5%E5%AE%9E%E4%BD%93"><span class="toc-number">4.1.2.</span> <span class="toc-text">实例：通用分页实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%88%86%E9%A1%B5%E5%AE%9E%E4%BD%93%E6%94%B9%E8%BF%9B"><span class="toc-number">4.1.3.</span> <span class="toc-text">通用分页实体改进</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/19/String/" title="笔记-String">笔记-String</a><time datetime="2025-04-19T04:46:00.000Z" title="Created 2025-04-19 12:46:00">2025-04-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/19/MyBatis/" title="笔记-MyBatis">笔记-MyBatis</a><time datetime="2025-04-19T04:46:00.000Z" title="Created 2025-04-19 12:46:00">2025-04-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/19/git/" title="笔记-git">笔记-git</a><time datetime="2025-04-19T04:46:00.000Z" title="Created 2025-04-19 12:46:00">2025-04-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/19/springboot/" title="笔记-SpringBoot">笔记-SpringBoot</a><time datetime="2025-04-19T04:46:00.000Z" title="Created 2025-04-19 12:46:00">2025-04-19</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/19/spring/" title="笔记-Spring">笔记-Spring</a><time datetime="2025-04-19T04:46:00.000Z" title="Created 2025-04-19 12:46:00">2025-04-19</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2025 By Muite</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><!-- hexo injector body_end end --></body></html>