<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>JAVA学习笔记-springMVC | Muite</title><meta name="author" content="Muite"><meta name="copyright" content="Muite"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="简介 SpringMVC是spring的web模块，用来开发Web应用  SpringMVC应用最终作为B&#x2F;S、C&#x2F;S模式下的Server端  Web应用的核心就是处理Http请求响应   两种开发模式 前后不分离开发： 浏览器&#x2F;客户端发送请求，访问指定路径资源–&gt;服务端进行业务处理并用数据组装页面（服务端渲染）–&gt;服务端返回带数据的完整页面给浏览器&amp;#x">
<meta property="og:type" content="article">
<meta property="og:title" content="JAVA学习笔记-springMVC">
<meta property="og:url" content="https://mutesniper.github.io/2025/03/17/springMVC/index.html">
<meta property="og:site_name" content="Muite">
<meta property="og:description" content="简介 SpringMVC是spring的web模块，用来开发Web应用  SpringMVC应用最终作为B&#x2F;S、C&#x2F;S模式下的Server端  Web应用的核心就是处理Http请求响应   两种开发模式 前后不分离开发： 浏览器&#x2F;客户端发送请求，访问指定路径资源–&gt;服务端进行业务处理并用数据组装页面（服务端渲染）–&gt;服务端返回带数据的完整页面给浏览器&amp;#x">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg">
<meta property="article:published_time" content="2025-03-17T04:46:00.000Z">
<meta property="article:modified_time" content="2025-04-03T11:33:18.380Z">
<meta property="article:author" content="Muite">
<meta property="article:tag" content="JAVA">
<meta property="article:tag" content="note">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "JAVA学习笔记-springMVC",
  "url": "https://mutesniper.github.io/2025/03/17/springMVC/",
  "image": "https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg",
  "datePublished": "2025-03-17T04:46:00.000Z",
  "dateModified": "2025-04-03T11:33:18.380Z",
  "author": [
    {
      "@type": "Person",
      "name": "Muite",
      "url": "https://mutesniper.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://mutesniper.github.io/2025/03/17/springMVC/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JAVA学习笔记-springMVC',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/1990ee2c41564e328f35ac72f555f170.jpeg);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg" onerror="this.onerror=null;this.src='/null'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"></a><a class="nav-page-title" href="/"><span class="site-name">JAVA学习笔记-springMVC</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">JAVA学习笔记-springMVC</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-03-17T04:46:00.000Z" title="Created 2025-03-17 12:46:00">2025-03-17</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-04-03T11:33:18.380Z" title="Updated 2025-04-03 19:33:18">2025-04-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java-note/">java-note</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><ul>
<li><p>SpringMVC是spring的web模块，用来开发Web应用</p>
</li>
<li><p>SpringMVC应用最终作为B&#x2F;S、C&#x2F;S模式下的Server端</p>
</li>
<li><p>Web应用的核心就是处理Http请求响应</p>
</li>
</ul>
<h3 id="两种开发模式"><a href="#两种开发模式" class="headerlink" title="两种开发模式"></a>两种开发模式</h3><ul>
<li><p>前后不分离开发：</p>
<p>浏览器&#x2F;客户端发送请求，访问指定路径资源–&gt;服务端进行业务处理并用数据组装页面（服务端渲染）–&gt;服务端返回带数据的完整页面给浏览器&#x2F;客户端</p>
</li>
<li><p>前后分离开发：</p>
<p>前端和后端作为独立的部分进行开发，前端专注于用户界面的设计和交互，后端则专注于提供API接口和服务。前端通过AJAX或其他方式调用后端提供的RESTful API获取数据，动态更新页面内容。</p>
<p>前后端分离其实是数据和页面分离，数据由后端负责，页面由前端负责</p>
</li>
</ul>
<h1 id="Helloworld"><a href="#Helloworld" class="headerlink" title="Helloworld"></a>Helloworld</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span><span class="comment">//告诉spring这是一个控制器（处理请求的组件）</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//把返回值放到响应体中</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello,springmvc! 你好!&quot;</span>;</span><br><span class="line">        <span class="comment">//如果只用@RequestMapping注解，springmvc默认认为返回值是页面的地址去跳转</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：如果类里的所有方法都想要将返回值放进响应体而不是当作地址，可以在类上标注@ResponseBody。而@Controller+@ResponseBody又可以用@RestController代替，所以以后只要标注@RestController就行了。</p>
<p>在启动ioc容器后，在浏览器访问localhost:8080&#x2F;hello就能得到<code>hello,springmvc! 你好!</code></p>
<p>想更改端口，在配置文件里写<code>server.port=</code></p>
<p>优点：<br>1.tomcat不用整合</p>
<p>2.servlet开发变得简单，不用实现任何接口</p>
<p>3.自动解决了乱码等问题</p>
<h1 id="RequestMapping"><a href="#RequestMapping" class="headerlink" title="@RequestMapping"></a>@RequestMapping</h1><h2 id="路径映射"><a href="#路径映射" class="headerlink" title="路径映射"></a>路径映射</h2><p>@RequestMapping的参数可以使用通配符</p>
<p>*:匹配任意多个字符</p>
<p>**：匹配任意多层路径</p>
<p>？：匹配任意单个字符</p>
<p>通配符存在的情况下，有多个方法能匹配请求，精确优先,  完全匹配&gt;?&gt;<em>&gt;</em>*</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello,springmvc! 你好!&quot;</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hell?&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">hello1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;hello1,springmvc!&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>比如如上两个方法，在请求localhost:8080&#x2F;hello时，执行的方法是第一个。</p>
<p><strong>注意：</strong>不能写两个相同的路径映射，不然会报错</p>
<h2 id="请求限定"><a href="#请求限定" class="headerlink" title="请求限定"></a>请求限定</h2><p>@RequestMapping的参数：</p>
<ul>
<li><p>value ：路径映射</p>
</li>
<li><p>method：限定请求方法（get，post，put等）</p>
</li>
<li><p>params：限定请求参数 <code>params=&quot;username&quot;</code>表示请求必须包含username参数,  <code>params=&quot;age=18&quot;</code>请求必须包含age&#x3D;18参数,!username表示不能带username参数</p>
</li>
<li><p>headers：<code>headers=&quot;haha&quot;</code>请求中必须包含名为haha的请求头。<code>headers=&quot;hehe！=1&quot;</code>表示hehe请求头不为1（不带也可以）</p>
</li>
<li><p>consumes：<code>consumes = &quot;application/json&quot;</code>表示浏览器必须携带json格式的数据</p>
</li>
<li><p>produces：<code>produces = &quot;text/plain;charset=utf-8&quot;</code>表示返回数据的类型是纯文本，此时返回<code>&quot;&lt;h1&gt;你好&lt;/h1&gt;&quot;</code>在浏览器中的到的就是<code>&quot;&lt;h1&gt;你好&lt;/h1&gt;&quot;</code>，如果设置为<code>produces = &quot;text/html;charset=utf-8&quot;</code>,则返回h1大小的”你好”</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestMappingLimit</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value=&quot;/test01&quot;,method= RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;helloworld&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test02&quot;,params = &quot;username&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test02</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test02&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test03&quot;,headers = &quot;haha&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test03</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test03&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test04&quot;,consumes = &quot;application/json&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test04</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test04&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/test05&quot;,produces = &quot;text/plain;charset=utf-8&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test05</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;h1&gt;你好&lt;/h1&gt;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="回顾HTTP"><a href="#回顾HTTP" class="headerlink" title="回顾HTTP"></a>回顾HTTP</h1><h2 id="HTTP请求格式"><a href="#HTTP请求格式" class="headerlink" title="HTTP请求格式"></a>HTTP请求格式</h2><ul>
<li>请求首行：请求方式、请求路径、请求协议</li>
<li>请求头：k:v   \n  k:v</li>
<li>请求体：此次请求携带的其他数据（get放在请求首行的请求路径后，post放在负载中）</li>
</ul>
<p>url格式：</p>
<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-08 115213.png" alt="屏幕截图 2025-03-08 115213" style="zoom: 50%;" />



<h2 id="JSON数据格式"><a href="#JSON数据格式" class="headerlink" title="JSON数据格式"></a>JSON数据格式</h2><ul>
<li>JavaScript Object Notation  (JavaScript对象表示法)</li>
<li>JSON用于将结构化数据(key-value)表示为JavaScript对象的标准格式，通常用于在网站上表示和传输数据</li>
<li>JSON可以作为一个<strong>对象</strong>或<strong>字符串</strong>存在<ul>
<li>前者用于解读JSON中的数据，后者用于通过网络传输JSON数据</li>
<li>JavaScript提供一个全局的可访问的JSON对象来对这两种数据进行转换</li>
</ul>
</li>
<li>JSON是一种纯数据格式，它只包含属性，没有方法</li>
</ul>
<h1 id="请求处理"><a href="#请求处理" class="headerlink" title="请求处理"></a>请求处理</h1><h2 id="用普通变量，封装请求参数"><a href="#用普通变量，封装请求参数" class="headerlink" title="用普通变量，封装请求参数"></a>用普通变量，封装请求参数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">请求参数:username=zhangsan&amp;password=123456&amp;cellphone=12345456&amp;agreement=on</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle01</span><span class="params">(String username,</span></span><br><span class="line"><span class="params">                       String password,</span></span><br><span class="line"><span class="params">                       String cellphone,</span></span><br><span class="line"><span class="params">                       <span class="type">boolean</span> agreement)</span>&#123;</span><br><span class="line">    <span class="comment">//注意：变量名要和参数名保持一致</span></span><br><span class="line">    System.out.println(username);</span><br><span class="line">    System.out.println(password);</span><br><span class="line">    System.out.println(cellphone);</span><br><span class="line">    System.out.println(agreement);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">zhangsan</span><br><span class="line">123456</span><br><span class="line">12345456</span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<ul>
<li>如果没有携带此参数，在获取时：包装类型自动封装为null，基本类型封装为默认值</li>
</ul>
<h2 id="RequestParam，封装多个参数"><a href="#RequestParam，封装多个参数" class="headerlink" title="*@RequestParam，封装多个参数"></a>*@RequestParam，封装多个参数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle02</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(&quot;password&quot;)</span> String pwd,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(&quot;cellphone&quot;)</span> String phone,</span></span><br><span class="line"><span class="params">                       <span class="meta">@RequestParam(&quot;agreement&quot;)</span> <span class="type">boolean</span> ok)</span>&#123;</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    System.out.println(pwd);</span><br><span class="line">    System.out.println(phone);</span><br><span class="line">    System.out.println(ok);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如上这种写法要求请求中一定要有这个参数，否则报错</p>
<p>我们可以用这种写法来取消必须携带</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestParam(value=&quot;agreement&quot;,required = false)</span></span><br></pre></td></tr></table></figure>

<p>还可以：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestParam(value=&quot;agreement&quot;,defaultValue=&quot;false&quot;)</span></span><br></pre></td></tr></table></figure>

<p>表示不但可以不携带，并且如果没有携带那么获取的时这个默认值</p>
<h2 id="用POJO，封装多个参数"><a href="#用POJO，封装多个参数" class="headerlink" title="*用POJO，封装多个参数"></a>*用POJO，封装多个参数</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle03&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle03</span><span class="params">(Person person)</span>&#123;</span><br><span class="line">    System.out.println(person);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String cellphone;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> agreement;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（lombok的@Data注解不生效就将pom.xml中的lombok插件加上<code>&lt;version&gt;$&#123;lombok.version&#125;&lt;/version&gt;</code>）</p>
<p>输出：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person&#123;username = zhangsan, password = <span class="number">123456</span>, cellphone = <span class="number">12345456</span>, agreement = <span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure>



<h2 id="RequestHeader获取请求头"><a href="#RequestHeader获取请求头" class="headerlink" title="@RequestHeader获取请求头"></a>@RequestHeader获取请求头</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle04&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle04</span><span class="params">(<span class="meta">@RequestHeader(&quot;host&quot;)</span> String host)</span>&#123;</span><br><span class="line">    System.out.println(host);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与@RequestParam一样，同样可以加defaultValue参数、required参数</p>
<h2 id="CookieValue获取Cookie数据"><a href="#CookieValue获取Cookie数据" class="headerlink" title="@CookieValue获取Cookie数据"></a>@CookieValue获取Cookie数据</h2><p>同@RequestHeader</p>
<h2 id="用POJO，级联封装复杂对象"><a href="#用POJO，级联封装复杂对象" class="headerlink" title="用POJO，级联封装复杂对象"></a>用POJO，级联封装复杂对象</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">username=zhangsan&amp;password=123456&amp;cellphone=12345456&amp;agreement=on</span><br><span class="line"></span><br><span class="line">address.province=陕西&amp;address.city=西安市&amp;address.area=雁塔区&amp;sex=男&amp;hobby=足球&amp;hobby=篮球&amp;grade=二年级</span><br></pre></td></tr></table></figure>

<p>发现address有三个属性,不能定义为String，而是一个对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String cellphone;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> agreement;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="keyword">private</span> String[] hobby;</span><br><span class="line">    <span class="keyword">private</span> String grade;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Address</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String province;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String area;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="RequestBody，封装JSON对象"><a href="#RequestBody，封装JSON对象" class="headerlink" title="*@RequestBody，封装JSON对象"></a>*@RequestBody，封装JSON对象</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span><span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span><span class="string">&quot;123456&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cellphone&quot;</span><span class="punctuation">:</span><span class="string">&quot;1111111&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;agreement&quot;</span><span class="punctuation">:</span><span class="string">&quot;on&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span><span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;hobby&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;篮球&quot;</span><span class="punctuation">,</span><span class="string">&quot;足球&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;grade&quot;</span><span class="punctuation">:</span><span class="string">&quot;二年级&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;province&quot;</span><span class="punctuation">:</span><span class="string">&quot;陕西省&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span><span class="string">&quot;西安市&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;area&quot;</span><span class="punctuation">:</span><span class="string">&quot;雁塔区&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span> </span><br></pre></td></tr></table></figure>

<p>普通pojo拿不了json的数据,所以用@RequestBody使spring给我们反序列化对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle07&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle07</span><span class="params">(<span class="meta">@RequestBody</span> Person person)</span>&#123;</span><br><span class="line">    System.out.println(person);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person&#123;username = 张三, password = 123456, cellphone = 1111111, agreement = true, address = Address&#123;province = 陕西省, city = 西安市, area = 雁塔区&#125;, sex = 男, hobby = [篮球, 足球], grade = 二年级&#125;</span><br></pre></td></tr></table></figure>

<p>也可以:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle07&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle07</span><span class="params">(<span class="meta">@RequestBody</span> String abc)</span>&#123;</span><br><span class="line">    System.out.println(abc);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;username&quot;:&quot;张三&quot;,</span><br><span class="line">    &quot;password&quot;:&quot;123456&quot;,</span><br><span class="line">    &quot;cellphone&quot;:&quot;1111111&quot;,</span><br><span class="line">    &quot;agreement&quot;:&quot;on&quot;,</span><br><span class="line">    &quot;sex&quot;:&quot;男&quot;,</span><br><span class="line">    &quot;hobby&quot;:[&quot;篮球&quot;,&quot;足球&quot;],</span><br><span class="line">    &quot;grade&quot;:&quot;二年级&quot;,</span><br><span class="line">    &quot;address&quot;:&#123;</span><br><span class="line">        &quot;province&quot;:&quot;陕西省&quot;,</span><br><span class="line">        &quot;city&quot;:&quot;西安市&quot;,</span><br><span class="line">        &quot;area&quot;:&quot;雁塔区&quot;</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure>

<p>所以，@RequestBody执行有两步</p>
<p>1.拿到请求体中的JSON字符串</p>
<p>2.把json字符串转为person对象</p>
<h2 id="RequestPart-RequestParam，封装文件，测试文件上传"><a href="#RequestPart-RequestParam，封装文件，测试文件上传" class="headerlink" title="*@RequestPart&#x2F;@RequestParam，封装文件，测试文件上传"></a>*@RequestPart&#x2F;@RequestParam，封装文件，测试文件上传</h2><p>MultipartFile  :专门封装文件项</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle08&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">handle08</span><span class="params">( Person person,</span></span><br><span class="line"><span class="params">                        <span class="meta">@RequestParam(&quot;headerImg&quot;)</span> MultipartFile headerImgFile,</span></span><br><span class="line"><span class="params">                        <span class="meta">@RequestParam(&quot;lifeImg&quot; )</span> MultipartFile[] lifeImgFiles)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">//获取原始文件名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> headerImgFile.getOriginalFilename();</span><br><span class="line">    System.out.println(originalFilename);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//文件大小</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">size</span> <span class="operator">=</span> headerImgFile.getSize();</span><br><span class="line">    <span class="comment">//获取文件流,从而能获取文件的内容(但一般使用transferto)</span></span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> headerImgFile.getInputStream();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//文件保存</span></span><br><span class="line">    headerImgFile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\无用\\&quot;</span>+<span class="string">&quot;1.png&quot;</span>));</span><br><span class="line">    System.out.println(<span class="string">&quot;====以上处理了头像===========&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(lifeImgFiles.length&gt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span> (MultipartFile lifeImgFile : lifeImgFiles) &#123;</span><br><span class="line">            lifeImgFile.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;D:\\无用\\&quot;</span>+<span class="string">&quot;2.png&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;========生活照保存结束=======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(person);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外，springmvc限制了文件上传大小，单个1mb，总10mb，可以通过以下配置改变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.servlet.multipart.max-file-size=1GB</span><br><span class="line">spring.servlet.multipart.max-request-size=10GB</span><br></pre></td></tr></table></figure>



<h2 id="使用HttpEntity，封装请求原始数据"><a href="#使用HttpEntity，封装请求原始数据" class="headerlink" title="使用HttpEntity，封装请求原始数据"></a>使用HttpEntity，封装请求原始数据</h2><p>HttpEntity：封装请求头、请求体；  把整个请求拿过来</p>
<p>​	泛型&lt;&gt; ：请求体类型</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@RequestMapping(&quot;/handle09&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">handle09</span><span class="params">(HttpEntity&lt;String&gt; entity)</span>&#123;</span><br><span class="line">        <span class="comment">//拿到所有请求头</span></span><br><span class="line">        <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> entity.getHeaders();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求头：&quot;</span>+headers);</span><br><span class="line">        <span class="comment">//拿到请求体</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">body</span> <span class="operator">=</span> entity.getBody();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求体：&quot;</span>+body);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>同样也可以直接封装成Person:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    <span class="meta">@RequestMapping(&quot;/handle09&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">handle09</span><span class="params">(HttpEntity&lt;Person&gt; entity)</span>&#123;</span><br><span class="line">        <span class="comment">//拿到所有请求头</span></span><br><span class="line">        <span class="type">HttpHeaders</span> <span class="variable">headers</span> <span class="operator">=</span> entity.getHeaders();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求头：&quot;</span>+headers);</span><br><span class="line">        <span class="comment">//拿到请求体</span></span><br><span class="line">        <span class="type">Person</span> <span class="variable">body</span> <span class="operator">=</span> entity.getBody();</span><br><span class="line">        System.out.println(<span class="string">&quot;请求体：&quot;</span>+body);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="使用原生Servlet-API，获取原生请求对象"><a href="#使用原生Servlet-API，获取原生请求对象" class="headerlink" title="使用原生Servlet API，获取原生请求对象"></a>使用原生Servlet API，获取原生请求对象</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/handle10&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handle10</span><span class="params">(HttpServletRequest request,</span></span><br><span class="line"><span class="params">                       HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    System.out.println(username);</span><br><span class="line"></span><br><span class="line">    response.getWriter().write(<span class="string">&quot;ok!&quot;</span>+username);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>重点：</p>
<ul>
<li>@RequestParam、pojo封装</li>
<li>@RequestBody</li>
<li>文件上传</li>
</ul>
<h1 id="响应处理"><a href="#响应处理" class="headerlink" title="响应处理"></a>响应处理</h1><h2 id="返回json"><a href="#返回json" class="headerlink" title="*返回json"></a>*返回json</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseTestController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/resp01&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Person <span class="title function_">resp01</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">        person.setUsername(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        person.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        person.setCellphone(<span class="string">&quot;123456789&quot;</span>);</span><br><span class="line">        person.setAgreement(<span class="literal">false</span>);</span><br><span class="line">        person.setSex(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        person.setHobby(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;篮球，足球&quot;</span>&#125;);</span><br><span class="line">        person.setGrade(<span class="string">&quot;三年级&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> person;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在浏览器收到：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123456&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;cellphone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;123456789&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;agreement&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sex&quot;</span><span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hobby&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;篮球，足球&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;grade&quot;</span><span class="punctuation">:</span> <span class="string">&quot;三年级&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>发现，springmvc自动把返回的对象转为json</p>
<p>其实这是使用了@ResponseBody注解，将返回的内容写道响应体中（如果返回的是对象，那自然写入的就是json）。由于我们在整个类上加了@RestController注解，就可以不用使用@ResponseBody了</p>
<h2 id="文件下载"><a href="#文件下载" class="headerlink" title="*文件下载"></a>*文件下载</h2><p>需要文件下载，自然要在响应头中告诉浏览器要进行文件下载，那么就要拿到整个响应数据，就要用到ResponseEntity（可以拿到响应头、响应体、状态码）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;InputStreamResource&gt; <span class="title function_">download</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">FileInputStream</span> <span class="variable">fileInputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;C:\\Users\\14693\\Pictures\\Screenshots\\屏幕截图 2024-10-14 183901.png&quot;</span>);</span><br><span class="line">    <span class="comment">//一次全部读取会溢出</span></span><br><span class="line">    <span class="comment">//byte[] bytes = fileInputStream.readAllBytes();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//两个问题：</span></span><br><span class="line">    <span class="comment">//1、文件名中文会乱码:解决：</span></span><br><span class="line">    String encode= URLEncoder.encode(<span class="string">&quot;哈哈.jpg&quot;</span>,<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">//2、文件太大会oom（内存溢出）:</span></span><br><span class="line">    <span class="type">InputStreamResource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamResource</span>(fileInputStream);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ResponseEntity.ok()</span><br><span class="line">            <span class="comment">//内容类型：流</span></span><br><span class="line">            .contentType(MediaType.APPLICATION_OCTET_STREAM)</span><br><span class="line">            <span class="comment">//内容大小</span></span><br><span class="line">            .contentLength(fileInputStream.available())</span><br><span class="line">            <span class="comment">//ContentDisposition：内容处理方式</span></span><br><span class="line">            .header(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;filename=&quot;</span>+encode)</span><br><span class="line">            .body(resource);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这以后就是文件下载的模板，只需要改文件路径和文件名，</p>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>重点：</p>
<ul>
<li>方法返回值类型String：返回json</li>
<li>返回值类型HttpEntity&lt;&gt;、ResponseEntity&lt;&gt;：请求头&amp;请求体</li>
</ul>
<h1 id="RESTful"><a href="#RESTful" class="headerlink" title="RESTful"></a>RESTful</h1><h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><h3 id="基本理解"><a href="#基本理解" class="headerlink" title="基本理解"></a>基本理解</h3><p>REST:Representational State Transfer表现层状态转移。是一种软件架构风格</p>
<p>完整理解：</p>
<p>Resource Representational State Transfer</p>
<ul>
<li>Resource:资源</li>
<li>Representational：表现形式，比如JSON、XML、JPEG等</li>
<li>State Transfer：状态变化，通过HTTP的动词（GET、POST、PUT、DELETE）实现</li>
</ul>
<p>一句话：使用资源名作为URI，使用HTTP的请求方式表示对资源的操作</p>
<p>满足REST风格的系统，我们称作RESTful系统</p>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-09 104700.png" alt="屏幕截图 2025-03-09 104700" style="zoom: 33%;" />

<p>比如GET&#x2F;user&#x2F;1&#x2F;order&#x2F;7&#x2F;produce&#x2F;3 。表示获取1号用户的7号订单的3号产品信息</p>
<h3 id="API理解"><a href="#API理解" class="headerlink" title="API理解"></a>API理解</h3><p>可以理解为接口（不是java中的interface），即Web应用暴露出来的让别人访问的请求路径</p>
<p>所以写web应用主要就是在写API接口，使前端调用对应的接口可以得到想要的数据</p>
<p>测试接口就是和前端交互，规定前端请求需要带的数据，以及后端响应带的数据，看能不能实现</p>
<p>调用别人的功能的方式</p>
<p>1.API：给第三方发请求，获取响应数据</p>
<p>2.SDK：导入jar包</p>
<h2 id="CRUD案例"><a href="#CRUD案例" class="headerlink" title="CRUD案例"></a>CRUD案例</h2><h3 id="要求"><a href="#要求" class="headerlink" title="要求"></a>要求</h3><p>controller只能调service，service调dao。只能上层调下层，不能反调（也可以同层）</p>
<h3 id="bean"><a href="#bean" class="headerlink" title="bean"></a>bean</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal salary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="DAO层"><a href="#DAO层" class="headerlink" title="DAO层"></a>DAO层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line">    <span class="comment">//根据id查询员工信息</span></span><br><span class="line">    Employee <span class="title function_">getEmpById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">    <span class="comment">//新增员工</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addEmp</span><span class="params">(Employee employee)</span>;</span><br><span class="line">    <span class="comment">//修改</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span>;</span><br><span class="line">    <span class="comment">//删除</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteEmpById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmpById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from employee where id = ?&quot;</span>;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">employee</span> <span class="operator">=</span> jdbcTemplate.queryForObject(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Employee.class), id);</span><br><span class="line">        <span class="keyword">return</span> employee;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into employee (name,age,email,gender,address,salary) values (?,?,?,?,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">int</span> update=jdbcTemplate.update(sql,</span><br><span class="line">                employee.getName(),</span><br><span class="line">                employee.getAge(),</span><br><span class="line">                employee.getEmail(),</span><br><span class="line">                employee.getGender(),</span><br><span class="line">                employee.getAddress(),</span><br><span class="line">                employee.getSalary());</span><br><span class="line">        System.out.println(<span class="string">&quot;新增成功，影响&quot;</span>+update+<span class="string">&quot;行&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update employee set name=?,age=?,email=?,gender=?,address=?,salary=? where id = ?&quot;</span>;</span><br><span class="line">        <span class="type">int</span> update=jdbcTemplate.update(sql,</span><br><span class="line">                employee.getName(),</span><br><span class="line">                employee.getAge(),</span><br><span class="line">                employee.getEmail(),</span><br><span class="line">                employee.getGender(),</span><br><span class="line">                employee.getAddress(),</span><br><span class="line">                employee.getSalary(),</span><br><span class="line">                employee.getId());</span><br><span class="line">        System.out.println(<span class="string">&quot;更新成功，影响&quot;</span>+update+<span class="string">&quot;行&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteEmpById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from employee where id = ?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql, id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Service层"><a href="#Service层" class="headerlink" title="Service层"></a>Service层</h3><p>其实service是对dao层进行了一些包装(类似于静态代理)，比如防null处理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line"></span><br><span class="line">    Employee <span class="title function_">getEmp</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee emp)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">saveEmp</span><span class="params">(Employee emp)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteEmp</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmployeeService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeDao employeeDao;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmp</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line">        <span class="keyword">return</span> empById;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateEmp</span><span class="params">(Employee emp)</span> &#123;</span><br><span class="line">        <span class="comment">//防null处理。考虑到service是被controller调用的</span></span><br><span class="line">        <span class="comment">//controller层传过来的employee的某些属性可能为null，所以先处理一下</span></span><br><span class="line">        <span class="comment">//怎么处理？</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">id</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">        <span class="keyword">if</span>(id==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//1、到数据库查询到employee原来的值</span></span><br><span class="line">        <span class="type">Employee</span> <span class="variable">empById</span> <span class="operator">=</span> employeeDao.getEmpById(id);</span><br><span class="line">        <span class="comment">//2、把页面带来的值覆盖原来的值，页面没带的自然保持原值</span></span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(emp.getName()))&#123;</span><br><span class="line">            empById.setName(emp.getName());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(emp.getEmail()))&#123;</span><br><span class="line">            empById.setEmail(emp.getEmail());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(emp.getAddress()))&#123;</span><br><span class="line">            empById.setAddress(emp.getAddress());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.hasText(emp.getGender()))&#123;</span><br><span class="line">            empById.setGender(emp.getGender());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(emp.getAge()!=<span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setAge(emp.getAge());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(emp.getSalary()!=<span class="literal">null</span>)&#123;</span><br><span class="line">            empById.setSalary(emp.getSalary());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        employeeDao.updateEmp(empById);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveEmp</span><span class="params">(Employee emp)</span> &#123;</span><br><span class="line">        employeeDao.addEmp(emp);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteEmp</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        employeeDao.deleteEmpById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Controller层"><a href="#Controller层" class="headerlink" title="Controller层"></a>Controller层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;&#125;</span><br><span class="line">&#123;id&#125;相当于?</span><br><span class="line">以上代码相当于访问localhost:<span class="number">8080</span>/employee/id时将id拿出来赋值给方法的形参</span><br></pre></td></tr></table></figure>



<p>@XxxMapping()：Rest映射注解,相当于@RequestMapping(value &#x3D; “”,method &#x3D; RequestMethod.Xxx)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">这两种写法相当</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeRestController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeService employeeService;</span><br><span class="line">    <span class="comment">//按照id查询员工</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        Employee emp=employeeService.getEmp(id);</span><br><span class="line">        <span class="keyword">return</span> emp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//新增员工：</span></span><br><span class="line">    <span class="comment">// 要求前端发送请求把员工的json放在请求体中</span></span><br><span class="line">    <span class="comment">//要求json中必须携带id</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Employee emp)</span>&#123;</span><br><span class="line"></span><br><span class="line">        employeeService.saveEmp(emp);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改员工：</span></span><br><span class="line">    <span class="comment">// 要求前端发送请求把员工的json放在请求体中</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/employee&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Employee emp)</span>&#123;</span><br><span class="line">        employeeService.updateEmp(emp);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@RequestMapping(value=&quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        employeeService.deleteEmp(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="统一返回R对象"><a href="#统一返回R对象" class="headerlink" title="统一返回R对象"></a>统一返回R对象</h3><p>我们发现，我们在上述代码中，返回的数据类型不一致，如何返回一个统一类型的对象？</p>
<p>如果我们规定对象的格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">code:业务状态码，200是成功，剩下都是失败；前后端将来会一起商定不同的状态码前端要显示的效果</span><br><span class="line">msg:服务端返给前端的提示信息</span><br><span class="line">data:服务端返回给前端的数据。可以是多个对象，多个对象用数组</span><br><span class="line">&#123;</span><br><span class="line">	&quot;code&quot;:</span><br><span class="line">	&quot;msg&quot;:</span><br><span class="line">	&quot;data&quot;:</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>R类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="comment">//方便返回对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.setCode(<span class="number">200</span>);</span><br><span class="line">        r.setData(data);</span><br><span class="line">        r.setMsg(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回无data的对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">ok</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.setCode(<span class="number">200</span>);</span><br><span class="line">        r.setMsg(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//失败的情况</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.setCode(<span class="number">500</span>);</span><br><span class="line">        r.setMsg(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//失败且返回code和msg</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span><span class="params">(Integer code,String msg)</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.setCode(code);</span><br><span class="line">        r.setMsg(msg);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//失败且返回code和msg，并携带信息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> R <span class="title function_">error</span><span class="params">(String msg,Integer code,Object data)</span> &#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">R</span>();</span><br><span class="line">        r.setCode(code);</span><br><span class="line">        r.setMsg(msg);</span><br><span class="line">        r.setData(data);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改后的Controller层:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeRestController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    EmployeeService employeeService;</span><br><span class="line">    <span class="comment">//按照id查询员工</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        Employee emp=employeeService.getEmp(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok(emp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//新增员工：</span></span><br><span class="line">    <span class="comment">// 要求前端发送请求把员工的json放在请求体中</span></span><br><span class="line">    <span class="comment">//要求json中必须携带id</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> Employee emp)</span>&#123;</span><br><span class="line">        employeeService.saveEmp(emp);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改员工：</span></span><br><span class="line">    <span class="comment">// 要求前端发送请求把员工的json放在请求体中</span></span><br><span class="line">    <span class="meta">@PutMapping(&quot;/employee&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Employee emp)</span>&#123;</span><br><span class="line">        employeeService.updateEmp(emp);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//@RequestMapping(value=&quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">Delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">        employeeService.deleteEmp(id);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="查询所有"><a href="#查询所有" class="headerlink" title="查询所有"></a>查询所有</h3><p>dao:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from employee&quot;</span>;</span><br><span class="line">    List&lt;Employee&gt; list = jdbcTemplate.query(sql, <span class="keyword">new</span> <span class="title class_">BeanPropertyRowMapper</span>&lt;&gt;(Employee.class));</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>service:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Employee&gt; <span class="title function_">getList</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;Employee&gt; list = employeeDao.getList();</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>controller:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/employees&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">all</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;Employee&gt; employees= employeeService.getList();</span><br><span class="line">    <span class="keyword">return</span> R.ok(employees);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><p><strong>补充：</strong></p>
<p>如果想要访问路径在localhost:8080后面不直接写&#x2F;employee…。可以在controller类上写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/api/v1&quot;)</span><br></pre></td></tr></table></figure>

<p>以后使用原本<code>localhost:8080/employees</code>可以访问的接口现在就要<code>localhost:8080/api/v1/employees</code></p>
<p>我们在浏览器直接输入<code>localhost:8080/api/v1/employees</code>是可行的，但是如果我在<code>localhost:8080</code>用某种方法偷偷访问<code>localhost:8080/api/v1/employees</code>而不使用浏览器的地址框，会发现访问不了，且被提示违背了CORS policy，引发了跨域问题。这是啥？</p>
<p>CORS (Cross-Origin Resource Sharing) :跨源资源共享:</p>
<p>浏览器为了安全，默认会遵循同源策略（请求要去的服务器和当前项目所在服务器必须是同一个源【同一个服务器】），如果不是,请求就会被拦截。</p>
<p>复杂的跨域请求会发送两次</p>
<p>1.options请求：预检请求。浏览器先发送oprions请求，询问服务器是否允许当前域名进行跨域访问</p>
<p>2.真正的请求：POST、DELETE、PUT等</p>
<p>（协议、ip、端口有一个不一样，就不同源）</p>
<p>解决方案：</p>
<p>1.前端自己解决</p>
<p>2.后端解决： 允许前端跨域即可。</p>
<p>​		原理：服务器给浏览器的响应头中添加字段：Access-Control-Allow-Origin&#x3D;*(*表示所有)</p>
<p>​		方法：用@CrossOrigin注释（类上或方法上）</p>
<h1 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h1><h2 id="HandlerInterceptor"><a href="#HandlerInterceptor" class="headerlink" title="HandlerInterceptor"></a>HandlerInterceptor</h2><p>要让spring知道我们要拦截什么，必须对springMVC底层做一些配置，那么我们定义一个MySpringMVCConfig。并且要求容器中有WebMvcConfigurer组件</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyHandlerInterceptor .preHandle&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;<span class="comment">//如果return false，则不执行目标方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyHandlerInterceptor afterCompletion&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, <span class="meta">@Nullable</span> ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;MyHandlerInterceptor postHandle&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span><span class="comment">//专门对springmvc底层做一些配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySpringMVCConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    MyHandlerInterceptor myHandlerInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加拦截器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(myHandlerInterceptor)</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>);<span class="comment">//拦截所有请求</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行顺序: preHandle–&gt;目标方法–&gt;postHandle–&gt;afterCompletion</p>
<p>如果有多个拦截器，可以加@order设置顺序</p>
<h2 id="多拦截器执行顺序"><a href="#多拦截器执行顺序" class="headerlink" title="多拦截器执行顺序"></a>多拦截器执行顺序</h2><p>拦截器执行顺序：顺序prehandle&#x3D;&gt;目标方法&#x3D;&gt;倒序posthandle&#x3D;&gt;渲染&#x3D;&gt;倒序aftercompletion。举例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MyHandlerInterceptor0 .preHandle</span><br><span class="line">MyHandlerInterceptor1 .preHandle</span><br><span class="line">MyHandlerInterceptor2 .preHandle</span><br><span class="line">MyHandlerInterceptor2 postHandle</span><br><span class="line">MyHandlerInterceptor1 postHandle</span><br><span class="line">MyHandlerInterceptor0 postHandle</span><br><span class="line">MyHandlerInterceptor2 afterCompletion</span><br><span class="line">MyHandlerInterceptor1 afterCompletion</span><br><span class="line">MyHandlerInterceptor0 afterCompletion</span><br></pre></td></tr></table></figure>

<p>只有执行成功的prehandle会倒序执行aftercompletion</p>
<p>posthandle、aftercompletion从哪里异常，此倒序链路就从哪里结束</p>
<p>posthandle失败不会影响aftercompletion执行</p>
<p>比如，在上面三个拦截器中，将拦截器1的prehandle返回false，输出如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MyHandlerInterceptor0 .preHandle</span><br><span class="line">MyHandlerInterceptor1 .preHandle</span><br><span class="line">MyHandlerInterceptor0 afterCompletion</span><br></pre></td></tr></table></figure>

<p>不执行目标方法就不会有posthandle  </p>
<h2 id="拦截器和过滤器的区别"><a href="#拦截器和过滤器的区别" class="headerlink" title="拦截器和过滤器的区别"></a>拦截器和过滤器的区别</h2><img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-10 093603.png" alt="屏幕截图 2025-03-10 093603" style="zoom: 50%;" />



<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><p>try-catch和throw之类的编程式异常处理在代码量增多时会很繁琐</p>
<p>所以我们考虑使用声明式异常处理</p>
<h2 id="ExceptionHandler指定异常处理方法"><a href="#ExceptionHandler指定异常处理方法" class="headerlink" title="@ExceptionHandler指定异常处理方法"></a>@ExceptionHandler指定异常处理方法</h2><p>当我们在处理数学运算异常时，采用如下方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">100</span>,<span class="string">&quot;执行异常&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果采用声明式异常，将会是如下代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试声名式异常处理</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">hello</span><span class="params">(<span class="meta">@RequestParam(value = &quot;i&quot;,defaultValue = &quot;0&quot;)</span> Integer i)</span> &#123;</span><br><span class="line">        <span class="type">int</span> j=<span class="number">10</span>/i;</span><br><span class="line">        <span class="keyword">return</span> R.ok(j);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//如果此Controller类出现异常，会自动在本类中找有没有@ExceptionHandler标注的方法</span></span><br><span class="line">    <span class="comment">//如果有，执行这个方法，它的返回值就是客户端收到的结果</span></span><br><span class="line">    <span class="comment">//如果多个异常处理方法可以处理同一个异常，精确优先</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleArithmeticException</span><span class="params">(ArithmeticException e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">100</span>,<span class="string">&quot;执行异常&quot;</span>+e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//写一个大的，处理其他异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleException</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>,<span class="string">&quot;其他异常&quot;</span>+e.getMessage());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<h2 id="ControllerAdvice全局异常处理"><a href="#ControllerAdvice全局异常处理" class="headerlink" title="@ControllerAdvice全局异常处理"></a>@ControllerAdvice全局异常处理</h2><p>@ExceptionHandler只能负责本类的异常，怎么处理全局异常呢?</p>
<p>在类上定义@ControllerAdvice,专门告诉springmvc，这个组件是专门负责全局异常处理的。</p>
<p>又因为我们要返回json格式，每个方法都要@ResponseBody,所以我们把他干脆写在类上。然后@ResponseBody和@ControllerAdvice可以合成一个注解：@RestControllerAdvice</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局异常处理器</span></span><br><span class="line"><span class="comment">/*@ResponseBody</span></span><br><span class="line"><span class="comment">@ControllerAdvice*/</span><span class="comment">//专门告诉springmvc，这个组件是专门负责全局异常处理的</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ExceptionHandler(Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(ArithmeticException e)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异常处理执行优先级：本类&gt;全局, 然后精确优先</p>
<p>如果出现了异常，本类和全局都不能处理，springboot底层对springmvc有兜底处理机制。但我们不应该让他兜底，而应该编写全局异常处理器，处理所有异常</p>
<h2 id="异常处理的最终方式"><a href="#异常处理的最终方式" class="headerlink" title="异常处理的最终方式"></a>异常处理的最终方式</h2><p>异常处理的推荐方式:</p>
<p>后端只编写正确的业务逻辑，如果出现业务问题，后端通过抛异常的方式提前中断业务逻辑(抛异常也可以让上层及以上的链路知道中断原因)，前端感知异常。</p>
<p>实现：</p>
<p>1.必须有业务异常类；举例：BizException</p>
<p>2.必须有异常枚举类；举例：BizExceptionEnume   专门列举项目中每个模块将会出现的所有异常情况</p>
<p>3.编写业务代码时，只需编写正确逻辑，如果出现预期问题，需要以抛异常的方式中断逻辑并通知上层</p>
<p>4.全局异常处理器；举例：GlobalExceptionHandler    处理所有异常，返回给前端约定的json数据和错误码</p>
<p>业务异常类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//业务异常类</span></span><br><span class="line"><span class="keyword">import</span> lombok.Getter;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BizException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BizException</span><span class="params">(BizExceptionEnume exceptionEnume)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(exceptionEnume.getMsg());</span><br><span class="line">        <span class="built_in">this</span>.code = exceptionEnume.getCode();</span><br><span class="line">        <span class="built_in">this</span>.msg = exceptionEnume.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>异常枚举类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">BizExceptionEnume</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//枚举的异常将会在写业务时动态扩充</span></span><br><span class="line">    <span class="comment">//订单模块相关异常</span></span><br><span class="line">    ORDER_CLOSED(<span class="number">10001</span>,<span class="string">&quot;订单已关闭&quot;</span>),</span><br><span class="line">    ORDER_NOT_EXIST(<span class="number">10002</span>,<span class="string">&quot;订单不存在&quot;</span>),</span><br><span class="line">    ORDER_TIMEOUT(<span class="number">10003</span>,<span class="string">&quot;订单超时&quot;</span>),</span><br><span class="line">    <span class="comment">//商品模块异常</span></span><br><span class="line">    PRODUCT_STOCK_NOT_ENOUGH(<span class="number">20003</span>,<span class="string">&quot;库存不足&quot;</span>)</span><br><span class="line">    <span class="comment">//.....</span></span><br><span class="line">    ;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="meta">@Getter</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">BizExceptionEnume</span><span class="params">(Integer code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全局异常处理器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler(Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">error</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error(<span class="number">500</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="meta">@ExceptionHandler(BizException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleBizException</span><span class="params">(BizException e)</span>&#123;</span><br><span class="line">        Integer code=e.getCode();</span><br><span class="line">        String msg=e.getMsg();</span><br><span class="line">        <span class="keyword">return</span> R.error(code,msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(id==<span class="literal">null</span>)&#123;</span><br><span class="line">   <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizException</span>(BizExceptionEnume.ORDER_CLOSED);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="数据校验"><a href="#数据校验" class="headerlink" title="数据校验"></a>数据校验</h1><h2 id="JSR303"><a href="#JSR303" class="headerlink" title="JSR303"></a>JSR303</h2><p><strong>步骤</strong>:</p>
<ul>
<li>导入校验包</li>
<li>编写校验注解</li>
<li>使用@Valid告诉springmvc 进行校验</li>
<li>在@Valid修饰的参数后面加一个BindingResult  bindingResult参数  （这一步以后会被全局异常处理替代）</li>
</ul>
<p>导入依赖:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>编写注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;姓名不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;年龄不能为空&quot;)</span></span><br><span class="line">    <span class="meta">@Max(value=150,message = &quot;年龄不能超过150岁&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value=0,message = &quot;年龄不能小于0&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@Email(message=&quot;邮箱格式不正确&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal salary;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//（）中的message是返回给前端的默认消息，在第四步中用到</span></span><br></pre></td></tr></table></figure>

<p>第三步：在Controller层中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> Employee emp)</span>&#123;</span><br><span class="line">    employeeService.saveEmp(emp);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完成，再来加一点要求：</p>
<p>如果校验出错，返回前端如下格式的数据：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;code&quot;:500,</span><br><span class="line">	&quot;msg&quot;:&quot;校验失败&quot;,</span><br><span class="line">	&quot;data&quot;:&#123;</span><br><span class="line">		&quot;name&quot;:&quot;姓名不能为空&quot;,</span><br><span class="line">		&quot;age&quot;：“年龄不能超过150&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>所以，第四步：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> Employee emp, BindingResult bindingResult)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!bindingResult.hasErrors())&#123;</span><br><span class="line">        employeeService.saveEmp(emp);</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//拿到所有属性错误的信息</span></span><br><span class="line">    Map&lt;String,String&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (FieldError fieldError : bindingResult.getFieldErrors()) &#123;</span><br><span class="line">        <span class="comment">//获取属性名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> fieldError.getField();</span><br><span class="line">        <span class="comment">//获取错误消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> fieldError.getDefaultMessage();</span><br><span class="line">        map.put(field,message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> R.error(<span class="string">&quot;校验失败&quot;</span>,<span class="number">500</span>,map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="全局异常处理"><a href="#全局异常处理" class="headerlink" title="全局异常处理"></a>全局异常处理</h2><p>发现如果每个方法采用如上方式，非常繁琐，所以考虑采用全局异常处理</p>
<p>因为校验失败会报MethodArgumentNotValidException异常，所以在全局异常类中加上：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">handleMethodArgumentNotValidException</span><span class="params">(MethodArgumentNotValidException e)</span>&#123;</span><br><span class="line">    <span class="type">BindingResult</span> <span class="variable">bindingResult</span> <span class="operator">=</span> e.getBindingResult();</span><br><span class="line">    <span class="comment">//拿到所有属性错误的信息</span></span><br><span class="line">    Map&lt;String,String&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (FieldError fieldError : bindingResult.getFieldErrors()) &#123;</span><br><span class="line">        <span class="comment">//获取属性名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">field</span> <span class="operator">=</span> fieldError.getField();</span><br><span class="line">        <span class="comment">//获取错误消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> fieldError.getDefaultMessage();</span><br><span class="line">        map.put(field,message);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> R.error(<span class="string">&quot;校验失败&quot;</span>,<span class="number">500</span>,map);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="自定义校验器"><a href="#自定义校验器" class="headerlink" title="自定义校验器"></a>自定义校验器</h2><p>流程：</p>
<p>写一个校验注解并绑定校验器</p>
<p>校验注解：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint(validatedBy = &#123;GenderValidator.class&#125;)</span><span class="comment">//校验器完成真正的校验功能</span></span><br><span class="line"><span class="meta">@Target(ElementType.FIELD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Gender &#123;</span><br><span class="line">    String <span class="title function_">message</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&#123;jakarta.validation.constraints.NotNull.message&#125;&quot;</span>;</span><br><span class="line">    Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">    Class&lt;? <span class="keyword">extends</span> <span class="title class_">Payload</span>&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;<span class="comment">//三个属性都没啥用</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>校验器:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一个泛型表示注解，第二个泛型表示要校验的属性的类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenderValidator</span> <span class="keyword">implements</span> <span class="title class_">ConstraintValidator</span>&lt;Gender,String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//vlaue:前端提交来的让我们进行校验的属性值</span></span><br><span class="line">    <span class="comment">//context:校验上下文</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isValid</span><span class="params">(String value, ConstraintValidatorContext constraintValidatorContext)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;男&quot;</span>.equals(value)||<span class="string">&quot;女&quot;</span>.equals(value);<span class="comment">//表示校验是否通过</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="错误消息提示国际化"><a href="#错误消息提示国际化" class="headerlink" title="错误消息提示国际化"></a>错误消息提示国际化</h2><p>为了让客户在不同的地区访问得到的错误信息语言其所在地区一致，我们通常不将注解中的message信息写死，而是写成占位符。</p>
<p>@Gender(message&#x3D;”{gender.message}”)。</p>
<p>然后在配置文件夹resources下创建messages_zh_CN.properties。在其中写上<code>gender.message=性别必须是男或女</code>。（如果是美国就是messages_en_US.properties）</p>
<p>此时会发现报出的错误信息是乱码，那么将设置中File Encodings中的设置修改成UTF-8。</p>
<p>接下来，就会根据请求中的请求头<code>accept-language</code>设置的语言返回错误信息。</p>
<h1 id="各种O的分层模型"><a href="#各种O的分层模型" class="headerlink" title="各种O的分层模型"></a>各种O的分层模型</h1><p>如果前端的对象和数据库的对象使用一个javabean，会发生一些问题，比如前端的注解和数据库的注解都作用在一个对象上了，这不符合设计模式中的单一职责。再比如如果返回密码等敏感信息给前端，不安全。</p>
<p>所以出现了各种O的模型：</p>
<p>Pojo：普通java类</p>
<p>Dao：数据库访问对象</p>
<p>TO：transfer object  用于传输数据的对象</p>
<p>VO：View&#x2F;Value Object  视图对象&#x2F;值对象 ：专门用来封装前端数据的对象。而且在给前端返回数据时要进行脱敏（消除敏感信息如密码等），所以javabean也要分层</p>
<h2 id="项目中的VO用法"><a href="#项目中的VO用法" class="headerlink" title="项目中的VO用法"></a>项目中的VO用法</h2><h3 id="add方法"><a href="#add方法" class="headerlink" title="add方法"></a>add方法</h3><p>在vo&#x2F;req包下创建EmployeeAddVo,表示在添加员工时对接前端的object。它不需要id这个字段</p>
<p>内容如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeAddVo</span> &#123;</span><br><span class="line">    <span class="meta">@NotBlank(message = &quot;姓名不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;年龄不能为空&quot;)</span></span><br><span class="line">    <span class="meta">@Max(value=150,message = &quot;年龄不能超过150岁&quot;)</span></span><br><span class="line">    <span class="meta">@Min(value=0,message = &quot;年龄不能小于0&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="meta">@Email(message=&quot;邮箱格式不正确&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="meta">@Gender(message = &quot;性别只能为男/女&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal salary;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样的话Employee类中的所有数据校验注解都不需要了。</p>
<p>并且我们把EmployeeRestController层中的add方法的形参改成EmployeeAddVo类型。但又发现调用的Service层的方法需要Employee类的对象，于是我们需要把传入的EmployeeAddVo类型的参数转化成Employee类型的对象。</p>
<p>spring给我们提供了<code>BeanUtils.copyProperties(要拷贝的对象，目标对象)</code>方法。</p>
<p>修改后的add方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> EmployeeAddVo vo)</span>&#123;</span><br><span class="line">    <span class="comment">//把vo转为do</span></span><br><span class="line">    Employee emp=<span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">    <span class="comment">//属性拷贝</span></span><br><span class="line">    BeanUtils.copyProperties(vo,emp);</span><br><span class="line">    employeeService.saveEmp(emp);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="update方法"><a href="#update方法" class="headerlink" title="update方法"></a>update方法</h3><p>创建EmployeeUpdateVo类，它需要的字段与Employee类相同，但是id不能为空。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeUpdateVo</span> &#123;</span><br><span class="line">    <span class="meta">@NotNull(message = &quot;id不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal salary;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>修改后的方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PutMapping(&quot;/employee&quot;)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> <span class="meta">@Valid</span> EmployeeUpdateVo vo)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    Employee emp=<span class="keyword">new</span> <span class="title class_">Employee</span>();</span><br><span class="line">    BeanUtils.copyProperties(vo,emp);</span><br><span class="line">    employeeService.updateEmp(emp);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="接口文档"><a href="#接口文档" class="headerlink" title="*接口文档"></a>*接口文档</h1><p>swagger可以快速生成实时接口文档，方便前后开发人员进行协调沟通。遵循OpenAPI规范。</p>
<p>knife4j是基于swagger之上的增强套件</p>
<p>在pom.xml中导入依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;knife4j-openapi3-jakarta-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">4.5</span><span class="number">.0</span>&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>启动项目后访问</p>
<p>localhost:8080&#x2F;doc.html  即可生成文档</p>
<p>注解：</p>
<ul>
<li><p>@Tag(name&#x3D;””)：描述controller类的作用</p>
</li>
<li><p>@Operation(summary&#x3D;””)：描述方法的作用</p>
</li>
<li><p>@Schema(description&#x3D;””)：描述vo等类的作用，并且类中属性也用此注解表明是什么</p>
</li>
<li><p>@Parameters({@Parameter(name&#x3D;”形参名”,description&#x3D;””)  ,@Parameter(name&#x3D;”形参名”,description&#x3D;””)…… })   ：写在controller层的方法上，用于描述形参的含义。  其中@Parameter中的参数还有 in（表示在请求中参数所在的位置）、required（是否一定需要此参数）</p>
</li>
</ul>
<h1 id="日期相关"><a href="#日期相关" class="headerlink" title="日期相关"></a>日期相关</h1><p>前端在提交日期相关的数据时，如果后端将数据库的日期记录的类型设置为datetime，那么前端在提交请求时的日期格式要求很严格，格式不对就会显示无法反序列化。如何解决：</p>
<p>在addvo和respvo的birth属性上标注@JsonFormat(pattern&#x3D;”格式”)。然后将获取数据库对象的方法改为如下格式:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/employee/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="comment">//@RequestMapping(value = &quot;/employee/&#123;id&#125;&quot;,method = RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">get</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span>&#123;</span><br><span class="line">    Employee emp=employeeService.getEmp(id);</span><br><span class="line">    EmployeeRespVo respVo=<span class="keyword">new</span> <span class="title class_">EmployeeRespVo</span>();</span><br><span class="line">    BeanUtils.copyProperties(emp,respVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok(respVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>即将返回的对象类型改为EmployeeRespVo类型，这样就可以做到以指定格式发送请求&amp;获取数据库对象</p>
<h1 id="Dispatcherservlet运行流程"><a href="#Dispatcherservlet运行流程" class="headerlink" title="Dispatcherservlet运行流程"></a>Dispatcherservlet运行流程</h1><p>简要版：</p>
<img src="C:\Users\14693\Desktop\Screenshots\屏幕截图 2025-03-10 222911.png" alt="屏幕截图 2025-03-10 222911"  />



<p>详细版：</p>
<img src="C:\Users\14693\Desktop\mvc.svg" alt="mvc" style="zoom: 67%;" /></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://mutesniper.github.io">Muite</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://mutesniper.github.io/2025/03/17/springMVC/">https://mutesniper.github.io/2025/03/17/springMVC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JAVA/">JAVA</a><a class="post-meta__tags" href="/tags/note/">note</a><a class="post-meta__tags" href="/tags/Spring/">Spring</a></div><div class="post-share"><div class="social-share" data-image="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/03/17/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" title="JAVA学习笔记-面向对象"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">JAVA学习笔记-面向对象</div></div><div class="info-2"><div class="info-item-1">面向对象封装含义：指的是将数据（变量）和操作数据的方法绑定在一起，并隐藏对象的内部状态，使其对外部不可见或受控访问。通过这种方式，封装提高了代码的安全性、可维护性和灵活性。 目的: 数据隐藏：封装允许隐藏类的内部实现细节，只暴露必要的部分给外部使用。这通常通过将类成员（属性和方法）设置为私有（private），并提供公共（public）的getter和setter方法来访问和修改这些成员。  控制访问级别：通过访问修饰符（public，protected,默认,private）保证只有对应的范围内能够访问和修改某些数据,从而保证了安全性。  增加灵活性：当类的内部实现发生改变时，如果对外接口保持不变，则不需要更改使用该类的所有地方。例如，如果你决定更改某个属性的存储方式或计算方式，只需在对应的getter和setter方法中做出调整即可，而不需要改动所有调用该属性的地方。  增加一些限制：比如在以下代码中的setAge（）方法中对年龄进行筛选   举例：1234567891011121314151617181920212223242526public class Person...</div></div></div></a><a class="pagination-related" href="/2025/03/17/linux/" title="JAVA学习笔记-Linux"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">Next</div><div class="info-item-2">JAVA学习笔记-Linux</div></div><div class="info-2"><div class="info-item-1">初识linuxLinux内核linux系统的组成如下：  Linux系统内核  系统级应用程序  内核提供系统最核心的功能，如：调度CPU、调度内存、调度文件系统、调度网络通讯、调度IO等。  系统级应用程序，可以理解为出厂自带程序，可供用户快速上手操作系统，如：文件管理器、任务管理器、图片查看、音乐播放       虚拟机  虚拟机快照通过快照可以实现虚拟机状态回滚。 虚拟机的克隆右键虚拟机–管理–克隆 可以在本机克隆，也可以克隆到另一台计算机上 虚拟机的迁移删除虚拟系统安装好了，它的本质就是文件，因此迁移和删除很方便，直接对文件夹进行操作就行了。 Linux基础命令Linux的目录结构Linux的目录结构是一个属性结构。Linux没有盘符的概念，只有一个根目录**&#x2F;**...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/03/17/MyBatis/" title="JAVA学习笔记-MyBatis"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">JAVA学习笔记-MyBatis</div></div><div class="info-2"><div class="info-item-1">简介MyBatis是持久层框架（和数据库进行交互的框架） MyBatis 不像 Hibernete 等这些全自动框架，它把关键的SQL部分交给程序员自己编写，而不是自动生成  HelloWorld步骤：  导入mybatis依赖  配置数据源  编写javabean对应数据库一个表模型  以前：Dao接口–&gt;Dao实现  。–&gt;标注@Repository注解 现在：Mapper接口–&gt;Mapper.xml实现 ,–&gt;标注@Mapper注解 （安装mybatisx插件自动为mapper类生成mapper文件，我们只需要在mapper文件中配置方法的sql语句）  告诉mybatis去哪里找mapper文件：mybatis.mapper-locations=classpath:mapper/**.xml   mapper接口： 1234@Mapper //告诉spring，这是MyBatis操作数据库用的接口public interface EmpMapper &#123;    Emp getEmpById(Integer...</div></div></div></a><a class="pagination-related" href="/2025/03/17/springboot/" title="JAVA学习笔记-springBoot"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">JAVA学习笔记-springBoot</div></div><div class="info-2"><div class="info-item-1">简介SpringBoot 帮我们简单、快速地创建一个独立的、生产级别的 Spring 应用； 特性：  快速创建独立 Spring 应用  直接嵌入Tomcat、Jetty or Undertow  提供可选的 starter，简化应用整合  按需自动配置 Spring 以及 第三方库  提供生产级特性：如 监控指标、健康检查、外部化配置等  无代码生成、无xml； 都是基于自动配置技术   场景启动器SpringBoot场景启动器：官方写的启动器命名：spring-boot-starter-*。第三方启动器命名：*-spring-boot-starter ​	作用：场景启动器负责把当前场景需要用的jar包都导入进来 ​	每个场景启动器都有一个基础依赖：spring-boot-starter 依赖管理为什么项目依赖不需要写版本号？—maven父子继承，父项目可以锁定版本。 父项目不管理的包都需要添加版本号 *自动配置基本理解 自动配置 导入场景，容器中就会自动配置好这个场景的核心组件。如 Tomcat、SpringMVC、DataSource...</div></div></div></a><a class="pagination-related" href="/2025/03/17/spring/" title="JAVA学习笔记-spring"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">JAVA学习笔记-spring</div></div><div class="info-2"><div class="info-item-1">简介spring是一个IoC和AOP框架 Spring的特性：  非侵入式：基于Spring开发的应用中的对象可以不依赖于Spring的API 依赖注入：DI（Dependency Injection）是反转控制（IoC：Inversion of Control）最经典的实现 面向切面编程：Aspect Oriented Programming ...</div></div></div></a><a class="pagination-related" href="/2025/04/03/springCloudAlibaba/" title="JAVA学习笔记-SpringCloudAlibaba"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-03</div><div class="info-item-2">JAVA学习笔记-SpringCloudAlibaba</div></div><div class="info-2"><div class="info-item-1">...</div></div></div></a><a class="pagination-related" href="/2025/03/17/List/" title="JAVA学习笔记-集合(待更新)"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">JAVA学习笔记-集合(待更新)</div></div><div class="info-2"><div class="info-item-1">ArrayList 数组可以存储基本数据类型和引用数据类型，集合只能存储引用数据类型，如果要存储基本数据类型，必须要打包成包装类次啊能存储。  成员方法 添加元素，返回值表示是否添加成功  1boolean add(E e)   删除指定元素,返回值表示是否删除成功  1boolean remove(E e)   删除指定索引的元素,返回被删除的元素  1E remove(int index)   修改指定索引下的元素,返回原来的元素  1E set(int index,E e)   获取指定索引的元素  1E get(int index)   返回集合的长度  1int size()    LinkedList 底层数据结构是双向链表。这使LinkedList的查询慢、增删快。但如果查询的是首尾元素也很快  LinkedList特有的API（用到很少，主要还是collection和list中的方法）  在该列表开头插入指定元素  1public void addFirst(E e)     将指定的元素追加到此列表的末尾  1public void addLast(E...</div></div></div></a><a class="pagination-related" href="/2025/03/17/String/" title="JAVA学习笔记-String"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-03-17</div><div class="info-item-2">JAVA学习笔记-String</div></div><div class="info-2"><div class="info-item-1">String:特性： 内容不会发生改变，它的对象在创建后不能被更改。如果进行修改则会创建一个新的字符串变量。 由于String对象不可变，所以它是线程安全的。  创建方法： 直接赋值： 1String name=&quot;... &quot;;  构造方法： 1234public String()public String(String original)public String(char[] chs)public String (byte[] chs)  方法： 获取长度：1str.length() 查找子串:1234//返回第一个指定字串的索引str.indexOf...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://img.alicdn.com/bao/uploaded/i3/2200690044395/O1CN012NL22Q1iKxHYWb17f_!!2200690044395.jpg" onerror="this.onerror=null;this.src='/null'" alt="avatar"/></div><div class="author-info-name">Muite</div><div class="author-info-description">keep learning</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">16</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/mutesniper"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/mutesniper" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">两种开发模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Helloworld"><span class="toc-number"></span> <span class="toc-text">Helloworld</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RequestMapping"><span class="toc-number"></span> <span class="toc-text">@RequestMapping</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E5%BE%84%E6%98%A0%E5%B0%84"><span class="toc-number"></span> <span class="toc-text">路径映射</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%99%90%E5%AE%9A"><span class="toc-number"></span> <span class="toc-text">请求限定</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E9%A1%BEHTTP"><span class="toc-number"></span> <span class="toc-text">回顾HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82%E6%A0%BC%E5%BC%8F"><span class="toc-number"></span> <span class="toc-text">HTTP请求格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number"></span> <span class="toc-text">JSON数据格式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86"><span class="toc-number"></span> <span class="toc-text">请求处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%99%AE%E9%80%9A%E5%8F%98%E9%87%8F%EF%BC%8C%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-number"></span> <span class="toc-text">用普通变量，封装请求参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestParam%EF%BC%8C%E5%B0%81%E8%A3%85%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-number"></span> <span class="toc-text">*@RequestParam，封装多个参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8POJO%EF%BC%8C%E5%B0%81%E8%A3%85%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-number"></span> <span class="toc-text">*用POJO，封装多个参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestHeader%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4"><span class="toc-number"></span> <span class="toc-text">@RequestHeader获取请求头</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CookieValue%E8%8E%B7%E5%8F%96Cookie%E6%95%B0%E6%8D%AE"><span class="toc-number"></span> <span class="toc-text">@CookieValue获取Cookie数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8POJO%EF%BC%8C%E7%BA%A7%E8%81%94%E5%B0%81%E8%A3%85%E5%A4%8D%E6%9D%82%E5%AF%B9%E8%B1%A1"><span class="toc-number"></span> <span class="toc-text">用POJO，级联封装复杂对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestBody%EF%BC%8C%E5%B0%81%E8%A3%85JSON%E5%AF%B9%E8%B1%A1"><span class="toc-number"></span> <span class="toc-text">*@RequestBody，封装JSON对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestPart-RequestParam%EF%BC%8C%E5%B0%81%E8%A3%85%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B5%8B%E8%AF%95%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number"></span> <span class="toc-text">*@RequestPart&#x2F;@RequestParam，封装文件，测试文件上传</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8HttpEntity%EF%BC%8C%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE"><span class="toc-number"></span> <span class="toc-text">使用HttpEntity，封装请求原始数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8E%9F%E7%94%9FServlet-API%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%8E%9F%E7%94%9F%E8%AF%B7%E6%B1%82%E5%AF%B9%E8%B1%A1"><span class="toc-number"></span> <span class="toc-text">使用原生Servlet API，获取原生请求对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number"></span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%A4%84%E7%90%86"><span class="toc-number"></span> <span class="toc-text">响应处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%94%E5%9B%9Ejson"><span class="toc-number"></span> <span class="toc-text">*返回json</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number"></span> <span class="toc-text">*文件下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number"></span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#RESTful"><span class="toc-number"></span> <span class="toc-text">RESTful</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-number"></span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%90%86%E8%A7%A3"><span class="toc-number">1.</span> <span class="toc-text">基本理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B"><span class="toc-number">2.</span> <span class="toc-text">举例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#API%E7%90%86%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">API理解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CRUD%E6%A1%88%E4%BE%8B"><span class="toc-number"></span> <span class="toc-text">CRUD案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A6%81%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text">要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bean"><span class="toc-number">2.</span> <span class="toc-text">bean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DAO%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">DAO层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Service%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">Service层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Controller%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text">Controller层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9ER%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.</span> <span class="toc-text">统一返回R对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89"><span class="toc-number">7.</span> <span class="toc-text">查询所有</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">8.</span> <span class="toc-text">跨域</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number"></span> <span class="toc-text">拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#HandlerInterceptor"><span class="toc-number"></span> <span class="toc-text">HandlerInterceptor</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E6%8B%A6%E6%88%AA%E5%99%A8%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number"></span> <span class="toc-text">多拦截器执行顺序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E5%92%8C%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number"></span> <span class="toc-text">拦截器和过滤器的区别</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number"></span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ExceptionHandler%E6%8C%87%E5%AE%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">@ExceptionHandler指定异常处理方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ControllerAdvice%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number"></span> <span class="toc-text">@ControllerAdvice全局异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%9A%84%E6%9C%80%E7%BB%88%E6%96%B9%E5%BC%8F"><span class="toc-number"></span> <span class="toc-text">异常处理的最终方式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C"><span class="toc-number"></span> <span class="toc-text">数据校验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSR303"><span class="toc-number"></span> <span class="toc-text">JSR303</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number"></span> <span class="toc-text">全局异常处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C%E5%99%A8"><span class="toc-number"></span> <span class="toc-text">自定义校验器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BA%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number"></span> <span class="toc-text">错误消息提示国际化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%84%E7%A7%8DO%E7%9A%84%E5%88%86%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number"></span> <span class="toc-text">各种O的分层模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84VO%E7%94%A8%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">项目中的VO用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#add%E6%96%B9%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">add方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#update%E6%96%B9%E6%B3%95"><span class="toc-number">2.</span> <span class="toc-text">update方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-number"></span> <span class="toc-text">*接口文档</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E7%9B%B8%E5%85%B3"><span class="toc-number"></span> <span class="toc-text">日期相关</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dispatcherservlet%E8%BF%90%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="toc-number"></span> <span class="toc-text">Dispatcherservlet运行流程</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/06/MyBatisPlus/" title="JAVA学习笔记-MyBatisPlus">JAVA学习笔记-MyBatisPlus</a><time datetime="2025-04-06T04:46:00.000Z" title="Created 2025-04-06 12:46:00">2025-04-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/05/Docker/" title="Ubuntu下Docker基本使用">Ubuntu下Docker基本使用</a><time datetime="2025-04-05T04:46:00.000Z" title="Created 2025-04-05 12:46:00">2025-04-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/04/docker%E8%BF%90%E8%A1%8C%E6%8A%A5%E9%94%99/" title="安装Docker后运行helloworld报错解决方案">安装Docker后运行helloworld报错解决方案</a><time datetime="2025-04-04T04:46:00.000Z" title="Created 2025-04-04 12:46:00">2025-04-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/03/springCloudAlibaba/" title="JAVA学习笔记-SpringCloudAlibaba">JAVA学习笔记-SpringCloudAlibaba</a><time datetime="2025-04-03T04:46:00.000Z" title="Created 2025-04-03 12:46:00">2025-04-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/03/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="JAVA学习笔记-设计模式">JAVA学习笔记-设计模式</a><time datetime="2025-04-03T04:46:00.000Z" title="Created 2025-04-03 12:46:00">2025-04-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2025 By Muite</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><!-- hexo injector body_end end --></body></html>